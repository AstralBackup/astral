<!-- NUEVO: Panel Beta Tester para Lenny -->
<script>
// --- PANEL BETA TESTER PARA LENNY ---
// Clave: LennyLOL123, solo si nombre = Lenny y apellido = AstralTeamCosmic
(function() {
    // Hook al submit del lockForm
    document.addEventListener('DOMContentLoaded', function() {
        const lockForm = document.getElementById('lockForm');
        if (!lockForm) return;
        const lockPassword = document.getElementById('lockPassword');
        const lockMsg = document.getElementById('lockMsg');
        const origOnSubmit = lockForm.onsubmit;
        lockForm.onsubmit = function(e) {
            if (lockPassword.value === "LennyLOL123") {
                // Verifica nombre y apellido
                let profileData = {};
                try { profileData = JSON.parse(localStorage.getItem('profileData') || '{}'); } catch(e){}
                if (
                    profileData.name === "Lenny" &&
                    profileData.surname === "AstralTeamCosmic"
                ) {
                    showBetaTesterPanel();
                    lockPassword.value = '';
                    lockMsg.textContent = '';
                    return false;
                } else {
                    showBetaTesterError();
                    lockPassword.value = '';
                    lockMsg.textContent = '';
                    return false;
                }
            }
            // Si no es la clave especial, sigue el flujo normal
            if (typeof origOnSubmit === "function") return origOnSubmit.apply(this, arguments);
            return true;
        };
    });

    // Panel Beta Tester
    function showBetaTesterPanel() {
        if (document.getElementById('betaTesterPanelOverlay')) return;
        let html = `
            <div style="
                background: linear-gradient(135deg,#222 60%,#b400ff 100%);
                border-radius: 18px;
                box-shadow: 0 8px 32px rgba(0,0,0,0.7);
                padding: 2.5rem 2rem 2rem 2rem;
                min-width:320px;max-width:95vw;
                display:flex;flex-direction:column;align-items:center;
                border: 3px solid #b400ff;
                color:#fffbe6;
                max-height: 90vh;
                overflow-y: auto;
            ">
                <div style="font-size:2.1rem;font-weight:900;
                    background: linear-gradient(90deg,#b400ff,#fffbe6 80%);
                    -webkit-background-clip:text;background-clip:text;color:transparent;
                    text-shadow:0 2px 12px #b400ff99,0 0 2px #fff;
                    margin-bottom:1.2rem;letter-spacing:1px;">
                    Panel Beta Tester AstralProton
                </div>
                <div style="margin-bottom:1.2rem;font-size:1.1rem;">
                    <b>Permisos de Beta Tester:</b>
                    <ul style="text-align:left;margin:1rem 0 0 1.2rem;font-size:1rem;list-style:none;padding:0;">
                        <li style="margin-bottom:10px;">
                            <button onclick="betaTesterAddPoints()" class="beta-tester-btn">Agregar puntos (10 estrellas)</button>
                        </li>
                    </ul>
                </div>
                <div style="margin-bottom:1.2rem;">
                    <b>Restricciones:</b>
                    <ul style="text-align:left;margin:1rem 0 0 1.2rem;font-size:1rem;">
                        <li>Solo puedes agregar puntos.</li>
                        <li>No tienes acceso a funciones de administrador.</li>
                    </ul>
                </div>
                <button onclick="document.getElementById('betaTesterPanelOverlay').remove();setLockScreenVisible(false);" class="beta-tester-btn" style="margin-top:1.2rem;">Cerrar panel</button>
            </div>
            <style>
            .beta-tester-btn {
                padding: 0.7rem 1.5rem;
                background: linear-gradient(45deg,#b400ff,#fffbe6 80%);
                color: #222;
                font-weight: 700;
                border: none;
                border-radius: 7px;
                font-size: 1.08rem;
                cursor: pointer;
                box-shadow: 0 2px 10px #b400ff55;
                transition: all .2s;
                margin-bottom: 0.3rem;
                outline: none;
                letter-spacing: 0.5px;
            }
            .beta-tester-btn:hover {
                background: linear-gradient(45deg,#fffbe6,#b400ff 80%);
                color: #111;
                transform: translateY(-2px) scale(1.04);
                box-shadow: 0 4px 18px #b400ff99;
            }
            @media (max-width: 700px) {
                #betaTesterPanelOverlay > div {
                    max-width: 99vw !important;
                    min-width: 0 !important;
                    padding: 1.2rem 0.5rem 1rem 0.5rem !important;
                }
            }
            </style>
        `;
        let overlay = document.createElement('div');
        overlay.id = 'betaTesterPanelOverlay';
        overlay.style = `
            position:fixed;z-index:20001;top:0;left:0;width:100vw;height:100vh;
            background:rgba(10,10,42,0.97);
            display:flex;align-items:center;justify-content:center;
            overflow:auto;
        `;
        overlay.innerHTML = html;
        document.body.appendChild(overlay);
        window.betaTesterAddPoints = function() {
            addUserPoints(10);
            alert('Â¡Has recibido 10 estrellas!');
            updatePointsDisplay && updatePointsDisplay();
            updateShopPointsDisplay && updateShopPointsDisplay();
        };
    }

    // Error si no cumple requisitos
    function showBetaTesterError() {
        if (document.getElementById('betaTesterErrorOverlay')) return;
        let html = `
            <div style="
                background: linear-gradient(135deg,#222 60%,#b400ff 100%);
                border-radius: 18px;
                box-shadow: 0 8px 32px rgba(0,0,0,0.7);
                padding: 2.5rem 2rem 2rem 2rem;
                min-width:320px;max-width:95vw;
                display:flex;flex-direction:column;align-items:center;
                border: 3px solid #b400ff;
                color:#fffbe6;
                max-height: 90vh;
                overflow-y: auto;
            ">
                <div style="font-size:2.1rem;font-weight:900;
                    background: linear-gradient(90deg,#b400ff,#fffbe6 80%);
                    -webkit-background-clip:text;background-clip:text;color:transparent;
                    text-shadow:0 2px 12px #b400ff99,0 0 2px #fff;
                    margin-bottom:1.2rem;letter-spacing:1px;">
                    Acceso denegado
                </div>
                <div style="font-size:1.1rem;color:#fffbe6;margin-bottom:1.5rem;text-align:center;">
                    Para acceder como Beta Tester debes tener:<br>
                    <b>Nombre:</b> Lenny<br>
                    <b>Apellido:</b> AstralTeamCosmic
                </div>
                <button style="
                    padding:0.7rem 1.5rem;
                    background:linear-gradient(45deg,#b400ff,#fffbe6);
                    color:#222;font-weight:700;border:none;border-radius:7px;
                    font-size:1.1rem;cursor:pointer;box-shadow:0 2px 10px #b400ff55;
                    transition:all .2s;
                    margin-bottom:1rem;
                " onclick="document.getElementById('betaTesterErrorOverlay').remove();">
                    Cerrar
                </button>
            </div>
        `;
        let overlay = document.createElement('div');
        overlay.id = 'betaTesterErrorOverlay';
        overlay.style = `
            position:fixed;z-index:20001;top:0;left:0;width:100vw;height:100vh;
            background:rgba(10,10,42,0.97);
            display:flex;align-items:center;justify-content:center;
            overflow:auto;
        `;
        overlay.innerHTML = html;
        document.body.appendChild(overlay);
    }
})();
</script>
<!-- FIN PANEL BETA TESTER -->