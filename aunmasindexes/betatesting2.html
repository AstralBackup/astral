<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AstralProton</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="styles.css">
</head>
<body>
<audio id="backgroundMusic" loop>
    <source src="titulonuevo.mp3" type="audio/mpeg">
    Tu navegador no soporta el elemento de audio.
</audio>

<audio id="storeMusic" loop>
    <source src="wiiueshop.mp3" type="audio/mpeg">
    Tu navegador no soporta el elemento de audio.
</audio>

<audio id="hoverSound">
    <source src="sfx.mp3" type="audio/mpeg">
    Tu navegador no soporta el elemento de audio.
</audio>

<audio id="customMusic" loop style="display: none;">
</audio>

<!-- Botón para controlar el audio -->
<div class="audio-controls" id="audioToggle">
    <i class="fas fa-volume-up"></i>
</div>

<!-- Pantalla de título -->
<div class="splash-screen" id="splashScreen">
<div class="stars" id="splashStars"></div>
<img src="https://hebbkx1anhila5yf.public.blob.vercel-storage.com/astrallogo-Ukan4TsfqrcvSVlWpY5ILsBQnsAfAW.png" alt="AstralProton Logo" class="splash-logo">
<button class="splash-button" id="startButton">Iniciar</button>
</div>

<!-- Fondo espacial -->
<div class="space-background">
<div class="stars" id="stars"></div>
</div>

<!-- Fondo personalizado -->
<div class="custom-background" id="customBackground" style="display: none;"></div>

<!-- Header -->
<header>
<div class="logo">
    <i class="fas fa-meteor"></i> <span class="logo-text" data-en="AstralProton" data-es="AstralProton">AstralProton</span>
</div>
<div class="user-profile">
    <div class="user-avatar" id="headerAvatar">
        <i class="fas fa-user"></i>
    </div>
    <span class="user-name" id="headerUserName">Usuario</span>
</div>
</header>

<!-- Contenedor principal -->
<div class="main-container">
<!-- Sidebar -->
<div class="sidebar">
    <a class="sidebar-item active" data-section="home">
        <i class="fas fa-home"></i>
        <span data-en="Home" data-es="Inicio">Inicio</span>
    </a>
    <a class="sidebar-item" data-section="games">
        <i class="fas fa-gamepad"></i>
        <span data-en="Games" data-es="Juegos">Juegos</span>
    </a>
    <a class="sidebar-item" data-section="store">
        <i class="fas fa-shopping-cart"></i>
        <span data-en="Store" data-es="Tienda">Tienda</span>
    </a>
    <a class="sidebar-item" data-section="tutorials">
        <i class="fas fa-book"></i>
        <span data-en="Tutorials" data-es="Tutoriales">Tutoriales</span>
    </a>
    <a class="sidebar-item" data-section="about">
        <i class="fas fa-info-circle"></i>
        <span data-en="About" data-es="Acerca de">Acerca de</span>
    </a>
    <a class="sidebar-item" data-section="settings">
        <i class="fas fa-cog"></i>
        <span data-en="Settings" data-es="Configuración">Configuración</span>
    </a>
    <a class="sidebar-item" data-section="profile">
        <i class="fas fa-id-card"></i>
        <span data-en="Profile" data-es="Perfil">Perfil</span>
    </a>
</div>

<!-- Contenido principal -->
<div class="content">
    <!-- Sección de inicio -->
    <div id="homeSection" class="content-section active">
        <h1 class="welcome-message" data-en="Welcome to AstralProton!" data-es="¡Bienvenido a AstralProton!">¡Bienvenido a AstralProton!</h1>
        <div class="welcome-container">
            <p class="welcome-text" data-en="Welcome back to AstralProton! Do you like this new interface? We encourage you to join our Discord server at this link: https://discord.gg/GEPrCZkWhs" data-es="¡Bienvenid@ de vuelta a AstralProton! ¿Te gusta esta nueva interfaz? Te recomendamos unirte a nuestro servidor de discord desde este link: https://discord.gg/GEPrCZkWhs">¡Bienvenid@ de vuelta a AstralProton! ¿Te gusta esta nueva interfaz? Te recomendamos unirte a nuestro servidor de discord desde este link: https://discord.gg/GEPrCZkWhs</p>
            <p class="welcome-text" data-en="Now, enjoy!" data-es="Sin mas preambulo, ¡A disfrutar!">Sin mas preambulo, ¡A disfrutar!</p>
            <p class="welcome-text" data-en="Note: In settings, if you want your desired configuration to be saved the next time you visit the page, click the SAVE SETTINGS button at the end of the section." data-es="Nota: En configuracion, si quieres que se guarde la configuracion deseada la proxima vez que visites la pagina, dale al boton GUARDAR CONFIGURACION al final del apartado.">Nota: En configuracion, si quieres que se guarde la configuracion deseada la proxima vez que visites la pagina, dale al boton GUARDAR CONFIGURACION al final del apartado.</p>
            <p class="welcome-text" data-en="Information not readable in english, please switch to spanish language." data-es="Ahora, te daremos mas informacion, esta no sera visible para aquellos que tengan la App en Ingles de manera oficial hasta una proxima drop. ¡También visita la nueva tienda para descargar juegos!">Ahora, te daremos mas informacion, esta no sera visible para aquellos que tengan la App en Ingles de manera oficial hasta una proxima drop. ¡También visita la nueva tienda para descargar juegos!</p>                            
        </div>
    </div>
    
    <!-- Sección de juegos -->
    <div id="gamesSection" class="content-section">
        <h1 class="section-title">
            <i class="fas fa-gamepad"></i> <span data-en="My Games" data-es="Mis Juegos">Mis Juegos</span>
        </h1>

        <!-- Grid de juegos del usuario -->
        <div class="games-grid" id="userGamesGrid">
            <!-- Los juegos del usuario se cargarán dinámicamente aquí -->
        </div>
        
        <div id="noGamesMessage" class="welcome-container" style="display: none;">
            <p class="welcome-text">No tienes juegos descargados. ¡Visita la tienda para descargar algunos!</p>
        </div>
    </div>

    <!-- Sección de tienda -->
    <div id="storeSection" class="content-section">
        <h1 class="section-title">
            <i class="fas fa-shopping-cart"></i> <span data-en="Store" data-es="Tienda">Tienda</span>
        </h1>

        <!-- Categorías de la tienda -->
        <div class="categories">
            <div class="category active" data-category="all">
                <i class="fas fa-th-large"></i> <span data-en="All" data-es="Todos">Todos</span>
            </div>
            <div class="category" data-category="action">
                <i class="fas fa-running"></i> <span data-en="Action" data-es="Acción">Acción</span>
            </div>
            <div class="category" data-category="arcade">
                <i class="fas fa-gamepad"></i> <span data-en="Arcade" data-es="Arcade">Arcade</span>
            </div>
            <div class="category" data-category="retro">
                <i class="fas fa-ghost"></i> <span data-en="Retro" data-es="Retro">Retro</span>
            </div>
            <div class="category" data-category="puzzle">
                <i class="fas fa-puzzle-piece"></i> <span data-en="Puzzle" data-es="Puzzle">Puzzle</span>
            </div>
            <div class="category" data-category="strategy">
                <i class="fas fa-chess"></i> <span data-en="Strategy" data-es="Estrategia">Estrategia</span>
            </div>
        </div>

        <!-- Grid de juegos de la tienda -->
        <div class="games-grid" id="storeGamesGrid">
            <!-- Los juegos de la tienda se cargarán dinámicamente aquí -->
        </div>
    </div>

    <!-- Sección de tutoriales -->
    <div id="tutorialsSection" class="content-section">
        <h1 class="section-title">
            <i class="fas fa-book"></i> <span data-en="Tutorials" data-es="Tutoriales">Tutoriales</span>
        </h1>
        <div class="welcome-container">
            <p class="welcome-text" data-en="Coming soon..." data-es="Próximamente...">Próximamente...</p>
        </div>
    </div>

    <!-- Sección de acerca de -->
    <div id="aboutSection" class="content-section">
        <h1 class="section-title">
            <i class="fas fa-info-circle"></i> <span data-en="About" data-es="Acerca de:">Acerca de:</span>
        </h1>
        <div class="welcome-container">
            <p class="welcome-text" data-en="AstralProton is a gaming portal designed to provide a seamless and enjoyable gaming experience." data-es="AstralProton es un portal de juegos diseñado para proporcionar una experiencia de juego fluida y agradable. Amistosa con entornos educativos y no educativos.">AstralProton es un portal de juegos diseñado para proporcionar una experiencia de juego fluida y agradable.</p>
            <p class="welcome-text" data-en="Version: 18.05.2025" data-es="Versión: 18.05.2025">Versión: 18.05.2025ae</p>
            <p class="welcome-text" data-en="Created by: AstralProton Team" data-es="Creado por: AstralProtonTeam">Creado por: AstralProtonTeam</p>
            <p class="welcome-text" data-en="Information not readable in english, please switch to spanish language." data-es="Significado de las letras del final:">Significado de las letras del final:</p>
            <p class="welcome-text" data-en="Information not readable in english, please switch to spanish language." data-es="a = Actualizacion con nuevo contenido.">a = Actualizacion con nuevo contenido.</p>
            <p class="welcome-text" data-en="Information not readable in english, please switch to spanish language." data-es="b = bugfix">b = bugfix</p>
            <p class="welcome-text" data-en="Information not readable in english, please switch to spanish language." data-es="e = Eliminacion de contenido">e = Eliminacion de contenido</p>
        </div>
    </div>

    <!-- Sección de configuración -->
    <div id="settingsSection" class="content-section">
        <h1 class="section-title">
            <i class="fas fa-cog"></i> <span data-en="Settings" data-es="Configuración">Configuración</span>
        </h1>
        
        <div class="settings-container">
            <!-- Grupo de configuración de apariencia -->
            <div class="settings-group">
                <h2 class="settings-title" data-en="Appearance" data-es="Apariencia">Apariencia</h2>
                
                <!-- Opción de tema -->
                <div class="settings-option">
                    <div>
                        <div class="settings-option-label" data-en="Theme" data-es="Tema">Tema</div>
                        <div class="settings-option-description" data-en="Choose between light and dark theme" data-es="Elige entre tema claro y oscuro">Elige entre tema claro y oscuro</div>
                    </div>
                    <label class="toggle-switch">
                        <input type="checkbox" id="themeToggle">
                        <span class="toggle-slider"></span>
                    </label>
                </div>
                
                <!-- Opción de tamaño de fuente -->
                <div class="settings-option">
                    <div>
                        <div class="settings-option-label" data-en="Font Size" data-es="Tamaño de Fuente">Tamaño de Fuente</div>
                        <div class="settings-option-description" data-en="Adjust the font size of the interface" data-es="Ajusta el tamaño de fuente de la interfaz">Ajusta el tamaño de fuente de la interfaz</div>
                    </div>
                    <div class="radio-group">
                        <label class="radio-option">
                            <input type="radio" name="fontSize" value="small">
                            <span class="radio-custom"></span>
                            <span data-en="Small" data-es="Pequeño">Pequeño</span>
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="fontSize" value="medium" checked>
                            <span class="radio-custom"></span>
                            <span data-en="Medium" data-es="Mediano">Mediano</span>
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="fontSize" value="large">
                            <span class="radio-custom"></span>
                            <span data-en="Large" data-es="Grande">Grande</span>
                        </label>
                    </div>
                </div>
            </div>
            
            <!-- Grupo de configuración de accesibilidad -->
            <div class="settings-group">
                <h2 class="settings-title" data-en="Accessibility" data-es="Accesibilidad">Accesibilidad</h2>
                
                <!-- Opción de reducción de movimiento -->
                <div class="settings-option">
                    <div>
                        <div class="settings-option-label" data-en="Reduce Motion" data-es="Reducir Movimiento">Reducir Movimiento</div>
                        <div class="settings-option-description" data-en="Minimize animations throughout the interface" data-es="Minimiza las animaciones en toda la interfaz">Minimiza las animaciones en toda la interfaz</div>
                    </div>
                    <label class="toggle-switch">
                        <input type="checkbox" id="reduceMotionToggle">
                        <span class="toggle-slider"></span>
                    </label>
                </div>
                
                <!-- Opción de idioma -->
                <div class="settings-option">
                    <div>
                        <div class="settings-option-label" data-en="Language" data-es="Idioma">Idioma</div>
                        <div class="settings-option-description" data-en="Choose your preferred language" data-es="Elige tu idioma preferido">Elige tu idioma preferido</div>
                    </div>
                    <select class="settings-select" id="languageSelect">
                        <option value="es">Español</option>
                        <option value="en">English</option>
                    </select>
                </div>
            </div>
            
            <!-- Grupo de configuración de rendimiento -->
            <div class="settings-group">
                <h2 class="settings-title" data-en="Performance" data-es="Rendimiento">Rendimiento</h2>
                
                <!-- Opción de calidad gráfica -->
                <div class="settings-option">
                    <div>
                        <div class="settings-option-label" data-en="Graphics Quality" data-es="Calidad Gráfica">Calidad Gráfica</div>
                        <div class="settings-option-description" data-en="Adjust the graphics quality for better performance" data-es="Ajusta la calidad gráfica para un mejor rendimiento">Ajusta la calidad gráfica para un mejor rendimiento</div>
                    </div>
                    <div class="range-slider">
                        <input type="range" min="1" max="3" value="2" id="graphicsQualitySlider">
                        <span class="range-value" id="graphicsQualityValue">2</span>
                    </div>
                </div>
                
                <!-- Opción de efectos visuales -->
                <div class="settings-option">
                    <div>
                        <div class="settings-option-label" data-en="Visual Effects" data-es="Efectos Visuales">Efectos Visuales</div>
                        <div class="settings-option-description" data-en="Enable or disable visual effects" data-es="Activa o desactiva los efectos visuales">Activa o desactiva los efectos visuales</div>
                    </div>
                    <label class="toggle-switch">
                        <input type="checkbox" id="visualEffectsToggle" checked>
                        <span class="toggle-slider"></span>
                    </label>
                </div>
            </div>
            
            <!-- Botón de guardar configuración -->
            <button class="settings-button" id="saveSettingsButton">
                <span data-en="Save Settings" data-es="Guardar Configuración">Guardar Configuración</span>
            </button>
        </div>
    </div>

    <!-- Sección de perfil -->
    <div id="profileSection" class="content-section">
        <h1 class="section-title">
            <i class="fas fa-id-card"></i> <span data-en="Profile" data-es="Perfil">Perfil</span>
        </h1>
        
        <div class="profile-container">
            <div class="profile-header">
                <div class="profile-avatar-container">
                    <div class="profile-avatar" id="profileAvatar">
                        <i class="fas fa-user"></i>
                    </div>
                    <button class="avatar-upload-button" id="avatarUploadButton">
                        <i class="fas fa-camera"></i> <span data-en="Change Avatar" data-es="Cambiar Avatar">Cambiar Avatar</span>
                    </button>
                    <input type="file" id="avatarFileInput" accept="image/*" style="display: none;">
                </div>
            </div>
            
            <form class="profile-form" id="profileForm">
                <div class="profile-field">
                    <label for="profileName" data-en="Name" data-es="Nombre">Nombre</label>
                    <input type="text" id="profileName" class="profile-input" placeholder="Tu nombre">
                </div>
                
                <div class="profile-field">
                    <label for="profileSurname" data-en="Surname" data-es="Apellido">Apellido</label>
                    <input type="text" id="profileSurname" class="profile-input" placeholder="Tu apellido">
                </div>
                
                <div class="profile-field">
                    <label for="profileAge" data-en="Age" data-es="Edad">Edad</label>
                    <input type="number" id="profileAge" class="profile-input" placeholder="Tu edad" min="1" max="120">
                </div>
                
                <div class="profile-field">
                    <label data-en="Gender" data-es="Género">Género</label>
                    <div class="radio-group">
                        <label class="radio-option">
                            <input type="radio" name="gender" value="male" id="genderMale">
                            <span class="radio-custom"></span>
                            <span data-en="Male" data-es="Masculino">Masculino</span>
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="gender" value="female" id="genderFemale">
                            <span class="radio-custom"></span>
                            <span data-en="Female" data-es="Femenino">Femenino</span>
                        </label>
                    </div>
                </div>
                
                <div class="profile-actions">
                    <button type="submit" class="background-button primary" id="saveProfileButton">
                        <i class="fas fa-save"></i> <span data-en="Save Profile" data-es="Guardar Perfil">Guardar Perfil</span>
                    </button>
                </div>
            </form>

            <!-- Sección de fondo personalizado -->
            <h3 class="profile-section-title">Fondo Personalizado</h3>
            <div class="background-options">
                <div class="background-preview">
                    <div class="background-preview-container" id="backgroundPreview">
                        <i class="fas fa-image"></i>
                        <span data-en="Background Preview" data-es="Vista previa del fondo">Vista previa del fondo</span>
                    </div>
                </div>
                <div class="background-controls">
                    <div class="profile-field">
                        <label for="backgroundUrl" data-en="Background URL" data-es="URL del fondo">URL del fondo</label>
                        <input type="text" id="backgroundUrl" class="profile-input" placeholder="https://example.com/image.jpg">
                    </div>
                    <div class="upload-background-container">
                        <button class="background-button primary" id="applyUrlButton">
                            <i class="fas fa-link"></i> <span data-en="Apply URL" data-es="Aplicar URL">Aplicar URL</span>
                        </button>
                        <button class="background-button" id="chooseFileButton">
                            <i class="fas fa-file-image"></i> <span data-en="Choose File" data-es="Elegir Archivo">Elegir Archivo</span>
                        </button>
                        <input type="file" id="backgroundFileInput" accept="image/*" style="display: none;">
                    </div>
                    <div class="background-actions">
                        <button class="background-button danger" id="removeBackgroundButton">
                            <i class="fas fa-trash"></i> <span data-en="Remove Background" data-es="Quitar Fondo">Quitar Fondo</span>
                        </button>
                        <button class="background-button primary" id="saveBackgroundButton">
                            <i class="fas fa-save"></i> <span data-en="Save Changes" data-es="Guardar Cambios">Guardar Cambios</span>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Sección de personalización de colores -->
            <h3 class="profile-section-title">Personalización de Colores</h3>
            <div class="color-customization">
                <div class="profile-field">
                    <label for="headerColor">Color de la Barra Superior:</label>
                    <input type="color" id="headerColor" class="color-picker" value="#0a0a2a">
                    <div class="color-preview" id="headerColorPreview"></div>
                </div>
                <div class="profile-field">
                    <label for="sidebarColor">Color de la Barra Lateral:</label>
                    <input type="color" id="sidebarColor" class="color-picker" value="#0a0a2a">
                    <div class="color-preview" id="sidebarColorPreview"></div>
                </div>
                <div class="profile-field">
                    <label for="accentColor">Color de Acento:</label>
                    <div class="color-picker-container">
                        <div class="color-gradient" id="colorGradient">
                            <div class="color-selector" id="colorSelector"></div>
                        </div>
                        <div class="hue-slider-container">
                            <input type="range" min="0" max="360" value="230" class="hue-slider" id="hueSlider">
                        </div>
                        <div class="color-values">
                            <div class="color-value-field">
                                <label for="colorR">R</label>
                                <input type="number" id="colorR" min="0" max="255" value="65" class="color-value-input">
                            </div>
                            <div class="color-value-field">
                                <label for="colorG">G</label>
                                <input type="number" id="colorG" min="0" max="255" value="105" class="color-value-input">
                            </div>
                            <div class="color-value-field">
                                <label for="colorB">B</label>
                                <input type="number" id="colorB" min="0" max="255" value="225" class="color-value-input">
                            </div>
                        </div>
                        <div class="color-preview" id="accentColorPreview"></div>
                    </div>
                </div>
                <div class="color-actions">
                    <button id="applyColors" class="background-button primary">
                        <i class="fas fa-paint-brush"></i> Aplicar Colores
                    </button>
                    <button id="resetColors" class="background-button danger">
                        <i class="fas fa-undo"></i> Restablecer Colores
                    </button>
                </div>
            </div>
            
            <!-- Sección de música personalizada -->
            <h3 class="profile-section-title">Música Personalizada</h3>
            <div class="background-options">
                <div class="profile-field">
                    <label for="customMusicFile">Subir música de fondo:</label>
                    <div class="upload-background-container">
                        <button class="background-button" id="chooseCustomMusicButton">
                            <i class="fas fa-music"></i> <span>Elegir Archivo de Audio</span>
                        </button>
                        <input type="file" id="customMusicFile" accept="audio/*" style="display: none;">
                    </div>
                    <div class="custom-music-info" id="customMusicInfo" style="margin-top: 10px; font-size: 0.9rem; opacity: 0.8;">
                        No hay música personalizada seleccionada
                    </div>
                </div>
                <div class="background-actions" style="margin-top: 15px;">
                    <button class="background-button danger" id="removeCustomMusicButton">
                        <i class="fas fa-trash"></i> <span>Eliminar Música</span>
                    </button>
                    <button class="background-button primary" id="saveCustomMusicButton">
                        <i class="fas fa-save"></i> <span>Guardar Música</span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
</div>

<!-- Alerta -->
<div class="alert" id="alert">
<h3 class="alert-title" id="alertTitle">Título de la alerta</h3>
<p class="alert-message" id="alertMessage">Mensaje de la alerta</p>
<button class="alert-button" id="alertButton">Aceptar</button>
</div>

<!-- Overlay -->
<div class="overlay" id="overlay"></div>

<!-- Contenedor de iframe para juegos -->
<div class="game-iframe-container" id="gameIframeContainer">
<iframe id="gameIframe" class="game-iframe" src="about:blank"></iframe>
<div class="game-controls">
    <button class="game-control-button fullscreen-button" id="fullscreenButton">
        <i class="fas fa-expand"></i> <span data-en="Fullscreen" data-es="Pantalla Completa">Pantalla Completa</span>
    </button>
    <button class="game-control-button directory-button" id="openDirectoryButton">
        <i class="fas fa-code"></i> <span data-en="Open in Directory Mode" data-es="Abrir en modo directorio">Abrir en modo directorio</span>
    </button>
    <button class="game-control-button back-button" id="backToMenuButton">
        <i class="fas fa-arrow-left"></i> <span data-en="Back to Menu" data-es="Volver al Menú">Volver al Menú</span>
    </button>
</div>
</div>

<!-- Notificación -->
<div class="notification" id="notification"></div>

<script>
// Datos de juegos (todos los juegos disponibles en la tienda)
const allGames = [
{
    id: 1,
    title: "AstralTube",
    artist: "AstralTeam, Google - Youtube pero con miniaturas.",
    thumbnail: "imgjuegos/astrallogo.png",
    song: "titulonuevo.mp3",
    url: "tube.html",
    categories: ["all"],
    price: "Gratis",
    isNew: true,
    isUpdate: false,
    alert: {
        type: "info",
        message: "¿Te sirvio la pagina?",
        redirect: "tube.html"
    }
},
{
    id: 2,
    title: "Musica",
    artist: "Musica de toda la Aplicacion de Astral",
    thumbnail: "imgjuegos/astrallogo.png",
    song: "titulonuevo.mp3",
    url: "musica.html",
    categories: ["all"],
    price: "Gratis",
    isNew: true,
    isUpdate: false,
    alert: {
        type: "info",
        message: "¿Cual es tu musica favorita de la pagina?",
        redirect: "musica.html"
    }
},
{
    id: 3,
    title: "Friday Night Funkin: Undertale",
    artist: "ninjamuffin69, PhantomArcade, evilsk8r, Kawai Sprite, AstralTeam",
    thumbnail: "imgjuegos/fnfunder.jpeg",
    song: "titulonuevo.mp3",
    url: "Juegos/fnfundertale/index.html",
    categories: ["action"],
    price: "Gratis",
    isNew: true,
    isUpdate: false,
    alert: {
        type: "loading",
        message: "Superate mi record de 1000 puntos.",
        redirect: "Juegos/fnfundertale/index.html"
    }
}, 
{
    id: 4,
    title: "Block Blast",
    artist: "Hungry Studio",
    thumbnail: "imgjuegos/blockblast.jpeg",
    song: "titulonuevo.mp3",
    url: "Juegos/blockblast/index.html",
    categories: ["action"],
    price: "Gratis",
    isNew: true,
    isUpdate: false,
    alert: {
        type: "loading",
        message: "Superate mi record de 1000 puntos.",
        redirect: "Juegos/blockblast/index.html"
    }
},  
{
    id: 5,
    title: "Death Run 3D",
    artist: "Y8",
    thumbnail: "imgjuegos/deathrun3d.jpeg",
    song: "titulonuevo.mp3",
    url: "Juegos/death-run-3d/index.html",
    categories: ["action"],
    price: "Gratis",
    isNew: true,
    isUpdate: false,
    alert: {
        type: "loading",
        message: "Superate mi record de 1000 puntos.",
        redirect: "Juegos/death-run-3d/index.html"
    }
},  
{
    id: 6,
    title: "Unfair Mario",
    artist: "Ni idea mijo",
    thumbnail: "imgjuegos/unfairmario.jpg",
    song: "juegosmusica/unfairmario.mp3",
    url: "Juegos/ita13/index.html",
    categories: ["action"],
    price: "Gratis",
    isNew: true,
    isUpdate: false,
    alert: {
        type: "loading",
        message: "Superate mi record de 1000 puntos.",
        redirect: "Juegos/ita13/index.html"
    }
},  
{
    id: 7,
    title: "Tunnel Rush",
    artist: "Deer Cat Games",
    thumbnail: "imgjuegos/tunnel.jpeg",
    song: "titulonuevo.mp3",
    url: "Juegos/tunnel-rush/index.html",
    categories: ["action"],
    price: "Gratis",
    isNew: true,
    isUpdate: false,
    alert: {
        type: "loading",
        message: "Superate mi record de 1000 puntos.",
        redirect: "Juegos/tunnel-rush/index.html"
    }
},    
{
    id: 8,
    title: "DON'T YOU LECTURE ME WITH YOUR THIRTY DOLLAR WEBSITE",
    artist: "GD COLON",
    thumbnail: "imgjuegos/30dollar.png",
    song: "titulonuevo.mp3",
    url: "Juegos/30dollarwebsite/index.html",
    categories: ["action"],
    price: "Gratis",
    isNew: true,
    isUpdate: false,
    alert: {
        type: "loading",
        message: "Crea la mejor musica.",
        redirect: "Juegos/30dollarwebsite/index.html"
    }
},
{
    id: 9,
    title: "2048",
    artist: "Poki",
    thumbnail: "imgjuegos/2014.png",
    song: "titulonuevo.mp3",
    url: "Juegos/2048/index.html",
    categories: ["puzzle"],
    price: "Gratis",
    isNew: true,
    isUpdate: false,
    alert: {
        type: "loading",
        message: "¡Sé INTELIGENTE y haz 2048!",
        redirect: "Juegos/2048/index.html"
    }
},
{
    id: 10,
    title: "Slope 2",
    artist: "Y8",
    thumbnail: "imgjuegos/slope2.jpeg",
    song: "juegosmusica/slope.mp3",
    url: "Juegos/slope-2/index.html",
    categories: ["action"],
    price: "Gratis",
    isNew: true,
    isUpdate: false,
    alert: {
        type: "loading",
        message: "¡Es hora de esquivar los obstaculos! Pero ahora con tu pana.",
        redirect: "Juegos/slope-2/index.html"
    }
},
{
    id: 11,
    title: "Highway Racer",
    artist: "Bonecracker Games",
    thumbnail: "imgjuegos/highway.jpeg",
    song: "titulonuevo.mp3",
    url: "Juegos/hwy-rcer/index.html",
    categories: ["retro"],
    price: "Gratis",
    isNew: true,
    isUpdate: false,
    alert: {
        type: "loading",
        message: "Un juego en donde debes de correr a toda velocidad y evitar los demas carros.",
        redirect: "Juegos/hwy-rcer/index.html"
    }
},
{
    id: 12,
    title: "Stick Duel Battle",
    artist: "undefined",
    thumbnail: "imgjuegos/stick2.jpeg",
    song: "titulonuevo.mp3",
    url: "Juegos/stick-duel-battle/index.html",
    categories: ["retro"],
    price: "Gratis",
    isNew: true,
    isUpdate: false,
    alert: {
        type: "loading",
        message: "Un juego en donde debes de pelear contra tu compa o contra un bot con pistolas o a puño.",
        redirect: "Juegos/stick-duel-battle/index.html"
    }
},
{
    id: 13,
    title: "The World's Hardest Game",
    artist: "undefined",
    thumbnail: "imgjuegos/hard.jpeg",
    song: "titulonuevo.mp3",
    url: "Juegos/ita10/index.html",
    categories: ["retro"],
    price: "Gratis",
    isNew: true,
    isUpdate: false,
    alert: {
        type: "loading",
        message: "El juego mas dificil del mundo, no te enojes si no puedes pasar el primer nivel. Esta demasiado dificil.",
        redirect: "Juegos/ita10/index.html"
    }
},
{
    id: 14,
    title: "Stickman Hook",
    artist: "?",
    thumbnail: "imgjuegos/stick.jpeg",
    song: "titulonuevo.mp3",
    url: "Juegos/stickman-hook/index.html",
    categories: ["retro"],
    price: "Gratis",
    isNew: true,
    isUpdate: false,
    alert: {
        type: "loading",
        message: "Un juego de balancearse como un loco, pero no te caigas.",
        redirect: "Juegos/stickman-hook/index.html"
    }
},
{
    id: 15,
    title: "PolyTrack",
    artist: "PolyTrack",
    thumbnail: "imgjuegos/poly.jpeg",
    song: "titulonuevo.mp3",
    url: "Juegos/polytrack/index.html",
    categories: ["retro"],
    price: "Gratis",
    isNew: true,
    isUpdate: false,
    alert: {
        type: "loading",
        message: "Un juego de carreras donde debes evitar los obstaculos y llegar a la meta.",
        redirect: "Juegos/polytrack/index.html"
    }
},
{
    id: 16,
    title: "Tetris Chafa",
    artist: "NotArtistAvailable",
    thumbnail: "imgjuegos/tetris.jpg",
    song: "titulonuevo.mp3",
    url: "Juegos/ita11/index.html",
    categories: ["puzzle"],
    price: "Gratis",
    isNew: true,
    isUpdate: false,
    alert: {
        type: "loading",
        message: "Crea una linea de 4 bloques para eliminarla, pero no dejes que se llene la pantalla.",
        redirect: "Juegos/ita11/index.html"
    }
},
{
    id: 17,
    title: "A Dance of Fire and Ice",
    artist: "Ni idea crack",
    thumbnail: "imgjuegos/adofai.jpeg",
    song: "titulonuevo.mp3",    
    url: "Juegos/a-dance-of-fire-and-ice/index.html",
    categories: ["arcade"],
    price: "Gratis",
    isNew: true,
    isUpdate: false,
    alert: {
        type: "loading",
        message: "Music-rhythm game, donde debes seguir el ritmo de la musica, es un juego muy bueno.",
        redirect: "Juegos/a-dance-of-fire-and-ice/index.html"
    }
},
{
    id: 18,
    title: "Google Snake",
    artist: "Google",
    thumbnail: "imgjuegos/snake.jpeg",
    song: "titulonuevo.mp3",    
    url: "Juegos/google-snake/index.html",
    categories: ["retro"],
    price: "Gratis",
    isNew: true,
    isUpdate: false,
    alert: {
        type: "loading",
        message: "Comete esta manzana, pero no te comas a ti mismo. Poetico.",
        redirect: "Juegos/google-snake/index.html"
    }
},
{
    id: 19,
    title: "Super Mario Combat",
    artist: "Sun-studios",
    thumbnail: "imgjuegos/mariocombat.jpeg",
    song: "juegosmusica/mariocombat.mp3",
    url: "Juegos/ita9/index.html",
    categories: ["retro"],
    price: "Gratis",
    isNew: false,
    isUpdate: false,
    alert: {
        type: "loading",
        message: "Un juego de combate bien chidoris, muevete con las flechas y ataca con la letra a",
        redirect: "Juegos/ita9/index.html"
    }
},
{
    id: 20,
    title: "BitLife",
    artist: "Ni idea crack",
    thumbnail: "imgjuegos/bitlife.png",
    song: "titulonuevo.mp3",
    url: "Juegos/bitlife/index.html",
    categories: ["strategy"],
    price: "Gratis",
    isNew: false,
    isUpdate: true,
    alert: {
        type: "loading",
        message: "No seas abogado, te arruinara la vida, creeme.",
        redirect: "Juegos/bitlife/index.html"
    }
},
{
    id: 21,
    title: "Angry Birds",
    artist: "ROVIO",
    thumbnail: "imgjuegos/angry.jpeg",
    song: "juegosmusica/angry.mp3",
    url: "Juegos/angrybirds/index.html",
    categories: ["arcade"],
    price: "Gratis",
    isNew: false,
    isUpdate: true,
    alert: {
        type: "loading",
        message: "Nunca uses el pajaro azul >:l",
        redirect: "Juegos/angrybirds/index.html"
    }
},
{
    id: 22,
    title: "Super Mario vs Luigi",
    artist: "ipodtouch0218",
    thumbnail: "imgjuegos/smbv.png",
    song: "juegosmusica/mariocombat.mp3",
    url: "Juegos/mariovsluigi/index.html",
    categories: ["retro"],
    price: "Gratis",
    isNew: true,
    isUpdate: false,
    alert: {
        type: "loading",
        message: "Un juego donde debes agarrar las estrellas, quien tenga mas gana, puedes jugar online! :)",
        redirect: "Juegos/mariovsluigi/index.html"
    }
},
{
    id: 23,
    title: "Cat Tennis",
    artist: "AstralOriginals (Astral lo porteo)",
    thumbnail: "imgjuegos/cattenis.png",
    song: "juegosmusica/cattenis.mp3",
    url: "Juegos/cattenis/index.html",
    categories: ["puzzle"],
    price: "Gratis",
    isNew: true,
    isUpdate: false,
    alert: {
        type: "loading",
        message: "Ganale en el tenis al gatito.",
        redirect: "Juegos/cattenis/index.html"
    }
},
{
    id: 24,
    title: "Slowroads",
    artist: "slowroads.io",
    thumbnail: "imgjuegos/slowroad.jpeg",
    song: "juegosmusica/cattenis.mp3",
    url: "Juegos/slowroads/index.html",
    categories: ["strategy"],
    price: "Gratis",
    isNew: true,
    isUpdate: false,
    alert: {
        type: "loading",
        message: "Conduce tranquilo por carreteras infinitas.",
        redirect: "Juegos/slowroads/index.html"
    }
},
{
    id: 25,
    title: "8 Ball Pool",
    artist: "?",
    thumbnail: "imgjuegos/8ballpool.jpeg",
    song: "titulo.mp3",
    url: "Juegos/8ball/index.html",
    categories: ["puzzle"],
    price: "Gratis",
    isNew: false,
    isUpdate: true,
    alert: {
        type: "loading",
        message: "¿Alguien realmente lee esto?",
        redirect: "Juegos/8ball/index.html"
    }
},
{
    id: 26,
    title: "1v1.lol",
    artist: "?",
    thumbnail: "imgjuegos/1v1.png",
    song: "juegosmusica/run3.mp3",
    url: "Juegos/1v1fixed/index.html",
    categories: ["action"],
    price: "Gratis",
    isNew: false,
    isUpdate: true,
    alert: {
        type: "loading",
        message: "A ver si ahora si funciona este juego jajaja",
        redirect: "Juegos/1v1fixed/index.html"
    }
},
{
    id: 27,
    title: "Run3",
    artist: "Ahora no sirve lo juro 😭",
    thumbnail: "imgjuegos/run3.jpeg",
    song: "juegosmusica/run3.mp3",
    url: "Juegos/run3fix2/index.html",
    categories: ["action"],
    price: "Gratis",
    isNew: false,
    isUpdate: true,
    alert: {
        type: "loading",
        message: "No sirve jaja",
        redirect: "Juegos/run3fix2/index.html"
    }
},
{
    id: 28,
    title: "Astral Chess",
    artist: "AstralOriginals",
    thumbnail: "imgjuegos/astralchess.png",
    song: "titulonuevo.mp3",
    url: "Juegos/astralchess/index.html",
    categories: ["strategy"],
    price: "Gratis",
    isNew: true,
    isUpdate: false,
    alert: {
        type: "info",
        message: "¡Recuerda siempre jugar con un amigo!",
        redirect: "Juegos/astralchess/index.html"
    }
},
{
    id: 29,
    title: "Wii Simulation",
    artist: "The Online Project",
    thumbnail: "imgjuegos/Wii.png",
    song: "juegosmusica/wii.mp3",
    url: "Juegos/vwii/index.html",
    categories: ["retro"],
    price: "Gratis",
    isNew: true,
    isUpdate: false,
    alert: {
        type: "info",
        message: "Nintendo no me demandes aaaa",
        redirect: "Juegos/vwii/index.html"
    }
},
{
    id: 30,
    title: "Minecraft: Astral x Precision Client",
    artist: "Mojang/Precision Client",
    thumbnail: "imgjuegos/minecraft.jpg",
    song: "juegosmusica/mc.mp3",
    url: "Juegos/minecraft/index.html",
    categories: ["action"],
    price: "Gratis",
    isNew: false,
    isUpdate: false,
    alert: {
        type: "loading",
        message: "¡Si quieres jugar con tus amigos abre el mundo a LAN!",
        redirect: "Juegos/minecraft/index.html"
    }
}
];

// Sistema de gestión de juegos del usuario
let userGames = [];
let currentSection = 'home';
let isMusicPlaying = false;
let currentMusic = null;
let customMusicData = null;

// Elementos de audio
const backgroundMusic = document.getElementById('backgroundMusic');
const storeMusic = document.getElementById('storeMusic');
const hoverSound = document.getElementById('hoverSound');
const customMusic = document.getElementById('customMusic');
const audioToggle = document.getElementById('audioToggle');

// Variables para el selector de color avanzado
let currentHue = 230;
let currentSaturation = 0.7;
let currentLightness = 0.6;

// Funciones de cookies
function setCookie(name, value, days) {
    const expires = new Date();
    expires.setTime(expires.getTime() + (days * 24 * 60 * 60 * 1000));
    document.cookie = `${name}=${JSON.stringify(value)};expires=${expires.toUTCString()};path=/`;
}

function getCookie(name) {
    const nameEQ = name + "=";
    const ca = document.cookie.split(';');
    for(let i = 0; i < ca.length; i++) {
        let c = ca[i];
        while (c.charAt(0) === ' ') c = c.substring(1, c.length);
        if (c.indexOf(nameEQ) === 0) {
            try {
                return JSON.parse(c.substring(nameEQ.length, c.length));
            } catch(e) {
                return c.substring(nameEQ.length, c.length);
            }
        }
    }
    return null;
}

// Cargar datos del usuario desde cookies
function loadUserData() {
    const savedGames = getCookie('userGames');
    if (savedGames) {
        userGames = savedGames;
    }

    const savedSettings = getCookie('userSettings');
    if (savedSettings) {
        applySettings(savedSettings);
    }

    const savedProfile = getCookie('userProfile');
    if (savedProfile) {
        applyProfile(savedProfile);
    }

    const savedBackground = getCookie('customBackground');
    if (savedBackground) {
        applyCustomBackground(savedBackground);
    }

    const savedColors = getCookie('customColors');
    if (savedColors) {
        applyCustomColors(savedColors);
    }

    const savedCustomMusic = getCookie('customMusic');
    if (savedCustomMusic) {
        customMusicData = savedCustomMusic;
        updateCustomMusicInfo();
    }
}

// Guardar datos del usuario en cookies
function saveUserData() {
    setCookie('userGames', userGames, 365);
}

// Función para mostrar notificación
function showNotification(message) {
    const notification = document.getElementById('notification');
    notification.textContent = message;
    notification.classList.add('show');
    setTimeout(() => {
        notification.classList.remove('show');
    }, 3000);
}

// Función para mostrar alerta
function showAlert(title, message) {
    const alertTitle = document.getElementById('alertTitle');
    const alertMessage = document.getElementById('alertMessage');
    const alert = document.getElementById('alert');
    const overlay = document.getElementById('overlay');

    alertTitle.textContent = title;
    alertMessage.textContent = message;

    alert.classList.add('show');
    overlay.classList.add('show');
}

// Función para cerrar alerta
function closeAlert() {
    const alert = document.getElementById('alert');
    const overlay = document.getElementById('overlay');

    alert.classList.remove('show');
    overlay.classList.remove('show');
}

// Función para cambiar de sección
function changeSection(sectionId) {
    const sections = document.querySelectorAll('.content-section');
    const sidebarItems = document.querySelectorAll('.sidebar-item');

    sections.forEach(section => {
        section.classList.remove('active');
    });

    sidebarItems.forEach(item => {
        item.classList.remove('active');
    });

    document.getElementById(`${sectionId}Section`).classList.add('active');
    document.querySelector(`.sidebar-item[data-section="${sectionId}"]`).classList.add('active');

    currentSection = sectionId;

    // Cambiar música según la sección
    if (sectionId === 'store') {
        playStoreMusic();
    } else {
        playBackgroundMusic();
    }

    // Actualizar contenido según la sección
    if (sectionId === 'games') {
        displayUserGames();
    } else if (sectionId === 'store') {
        displayStoreGames();
    }
}

// Función para reproducir música de fondo
function playBackgroundMusic() {
    if (customMusicData && customMusicData.data) {
        if (currentMusic !== customMusic) {
            if (currentMusic) {
                currentMusic.pause();
            }
            currentMusic = customMusic;
            if (isMusicPlaying) {
                customMusic.volume = 0.3;
                customMusic.play().catch(error => {
                    console.log('Error al reproducir música personalizada:', error);
                });
            }
        }
    } else {
        if (currentMusic !== backgroundMusic) {
            if (currentMusic) {
                currentMusic.pause();
            }
            currentMusic = backgroundMusic;
            if (isMusicPlaying) {
                backgroundMusic.volume = 0.3;
                backgroundMusic.play().catch(error => {
                    console.log('Error al reproducir música de fondo:', error);
                });
            }
        }
    }
}

// Función para reproducir música de la tienda
function playStoreMusic() {
    if (currentMusic !== storeMusic) {
        if (currentMusic) {
            currentMusic.pause();
        }
        currentMusic = storeMusic;
        if (isMusicPlaying) {
            storeMusic.volume = 0.3;
            storeMusic.play().catch(error => {
                console.log('Error al reproducir música de la tienda:', error);
            });
        }
    }
}

// Función para alternar música
function toggleMusic() {
    if (isMusicPlaying) {
        if (currentMusic) {
            currentMusic.pause();
        }
        isMusicPlaying = false;
        audioToggle.innerHTML = '<i class="fas fa-volume-mute"></i>';
    } else {
        isMusicPlaying = true;
        audioToggle.innerHTML = '<i class="fas fa-volume-up"></i>';
        if (currentSection === 'store') {
            playStoreMusic();
        } else {
            playBackgroundMusic();
        }
    }
}

// Función para reproducir sonido de hover
function playHoverSound() {
    if (isMusicPlaying) {
        const hoverSoundClone = hoverSound.cloneNode(true);
        hoverSoundClone.volume = 0.2;
        hoverSoundClone.play().catch(error => {
            console.log('Error al reproducir sonido de hover:', error);
        });
    }
}

// Función para mostrar juegos del usuario
function displayUserGames() {
    const userGamesGrid = document.getElementById('userGamesGrid');
    const noGamesMessage = document.getElementById('noGamesMessage');

    userGamesGrid.innerHTML = '';

    if (userGames.length === 0) {
        noGamesMessage.style.display = 'block';
        return;
    }

    noGamesMessage.style.display = 'none';

    userGames.forEach((gameId, index) => {
        const game = allGames.find(g => g.id === gameId);
        if (game) {
            const gameCard = document.createElement('div');
            gameCard.className = 'game-card';
            gameCard.style.animationDelay = `${index * 0.1}s`;
            
            gameCard.innerHTML = `
                <img src="${game.thumbnail}" alt="${game.title}" class="game-thumbnail">
                <div class="game-info">
                    <h3 class="game-title">${game.title}</h3>
                    <p class="game-artist">${game.artist}</p>
                </div>
                <div class="play-button">
                    <i class="fas fa-play"></i>
                </div>
            `;
            
            gameCard.addEventListener('click', () => {
                openGame(game);
            });
            
            userGamesGrid.appendChild(gameCard);
        }
    });
}

// Función para mostrar juegos de la tienda
function displayStoreGames(category = 'all') {
    const storeGamesGrid = document.getElementById('storeGamesGrid');
    storeGamesGrid.innerHTML = '';

    let filteredGames = allGames;

    if (category !== 'all') {
        filteredGames = allGames.filter(game => game.categories.includes(category));
    }

    // Filtrar juegos que el usuario ya tiene
    const availableGames = filteredGames.filter(game => !userGames.includes(game.id));

    availableGames.forEach((game, index) => {
        const storeCard = document.createElement('div');
        storeCard.className = 'store-card';
        storeCard.style.animationDelay = `${index * 0.1}s`;
        
        storeCard.innerHTML = `
            <img src="${game.thumbnail}" alt="${game.title}" class="store-thumbnail">
            <div class="store-info">
                <h3 class="store-title">${game.title}</h3>
                <p class="store-price">${game.price}</p>
            </div>
            <button class="download-button">
                <i class="fas fa-download"></i> Descargar
            </button>
        `;
        
        const downloadButton = storeCard.querySelector('.download-button');
        downloadButton.addEventListener('click', (e) => {
            e.stopPropagation();
            downloadGame(game);
        });
        
        storeCard.addEventListener('click', () => {
            showGameInfo(game);
        });
        
        storeGamesGrid.appendChild(storeCard);
    });

    if (availableGames.length === 0) {
        storeGamesGrid.innerHTML = `
            <div class="welcome-container" style="grid-column: 1/-1;">
                <p class="welcome-text">¡Ya tienes todos los juegos de esta categoría!</p>
            </div>
        `;
    }
}

// Función para descargar un juego
function downloadGame(game) {
    if (!userGames.includes(game.id)) {
        userGames.push(game.id);
        saveUserData();
        showNotification(`¡${game.title} se ha descargado correctamente!`);
        
        // Actualizar la vista de la tienda
        if (currentSection === 'store') {
            const activeCategory = document.querySelector('.category.active').dataset.category;
            displayStoreGames(activeCategory);
        }
    } else {
        showNotification('Ya tienes este juego descargado.');
    }
}

// Función para mostrar información del juego
function showGameInfo(game) {
    showAlert(game.title, `${game.artist}

Precio: ${game.price}

¿Deseas descargarlo?`);

    // Cambiar el comportamiento del botón de alerta
    const alertButton = document.getElementById('alertButton');
    alertButton.textContent = 'Descargar';
    alertButton.onclick = () => {
        downloadGame(game);
        closeAlert();
    };
}

// Función para abrir un juego
function openGame(game) {
    const gameIframe = document.getElementById('gameIframe');
    const gameIframeContainer = document.getElementById('gameIframeContainer');

    // Detener la música
    if (currentMusic) {
        currentMusic.pause();
    }

    gameIframe.src = game.url;
    gameIframeContainer.style.display = 'flex';
}

// Función para cerrar un juego
function closeGame() {
    const gameIframe = document.getElementById('gameIframe');
    const gameIframeContainer = document.getElementById('gameIframeContainer');

    gameIframe.src = 'about:blank';
    gameIframeContainer.style.display = 'none';
    gameIframeContainer.classList.remove('fullscreen');

    // Reanudar la música
    if (isMusicPlaying) {
        if (currentSection === 'store') {
            playStoreMusic();
        } else {
            playBackgroundMusic();
        }
    }
}

// Función para alternar pantalla completa
function toggleFullscreen() {
    const gameIframeContainer = document.getElementById('gameIframeContainer');
    gameIframeContainer.classList.toggle('fullscreen');
}

// Función para abrir el juego en una nueva pestaña
function openGameInNewTab() {
    const gameIframe = document.getElementById('gameIframe');
    const currentGameUrl = gameIframe.src;

    if (currentGameUrl && currentGameUrl !== 'about:blank') {
        window.open(currentGameUrl, '_blank');
    }
}

// Función para crear estrellas
function createStars(container, count) {
    const starsContainer = document.getElementById(container);
    if (!starsContainer) return;

    starsContainer.innerHTML = '';

    for (let i = 0; i < count; i++) {
        const star = document.createElement('div');
        star.className = 'star';
        
        const size = Math.random() * 3 + 1;
        const posX = Math.random() * 100;
        const posY = Math.random() * 100;
        const duration = Math.random() * 3 + 2;
        const opacity = Math.random() * 0.5 + 0.3;
        
        star.style.width = `${size}px`;
        star.style.height = `${size}px`;
        star.style.left = `${posX}%`;
        star.style.top = `${posY}%`;
        star.style.setProperty('--duration', `${duration}s`);
        star.style.setProperty('--opacity', opacity);
        
        starsContainer.appendChild(star);
    }
}

// Función para crear nebulosas
function createNebulas(count) {
    const starsContainer = document.getElementById('stars');
    if (!starsContainer) return;

    for (let i = 0; i < count; i++) {
        const nebula = document.createElement('div');
        nebula.className = 'nebula';
        
        const size = Math.random() * 200 + 100;
        const posX = Math.random() * 100;
        const posY = Math.random() * 100;
        const colors = ['#ff6b6b', '#4ecdc4', '#45b7d1', '#96ceb4', '#feca57'];
        const color = colors[Math.floor(Math.random() * colors.length)];
        
        nebula.style.width = `${size}px`;
        nebula.style.height = `${size}px`;
        nebula.style.left = `${posX}%`;
        nebula.style.top = `${posY}%`;
        nebula.style.setProperty('--color', color);
        
        starsContainer.appendChild(nebula);
    }
}

// Funciones adicionales para el perfil y configuraciones
function applySettings(settings) {
    console.log('Aplicando configuraciones:', settings);
}

function applyProfile(profile) {
    console.log('Aplicando perfil:', profile);
}

function applyCustomBackground(background) {
    console.log('Aplicando fondo personalizado:', background);
}

function applyCustomColors(colors) {
    console.log('Aplicando colores personalizados:', colors);
}

function updateCustomMusicInfo() {
    console.log('Actualizando información de música personalizada');
}

// Inicialización cuando se carga la página
document.addEventListener('DOMContentLoaded', () => {
    console.log('Página cargada, inicializando...');

    // Crear estrellas y nebulosas
    createStars('stars', 100);
    createStars('splashStars', 50);
    createNebulas(5);

    // Cargar datos del usuario
    loadUserData();

    // Event listener para el botón de inicio
    const startButton = document.getElementById('startButton');
    if (startButton) {
        startButton.addEventListener('click', () => {
            console.log('Botón de inicio presionado');
            const splashScreen = document.getElementById('splashScreen');
            if (splashScreen) {
                splashScreen.style.opacity = '0';
                setTimeout(() => {
                    splashScreen.style.display = 'none';
                }, 1000);
            }
            playHoverSound();
        });
    }

    // Event listeners para la navegación
    document.querySelectorAll('.sidebar-item').forEach(item => {
        item.addEventListener('click', () => {
            const section = item.dataset.section;
            changeSection(section);
            playHoverSound();
        });
    });

    // Event listeners para categorías de la tienda
    document.querySelectorAll('.category').forEach(category => {
        category.addEventListener('click', () => {
            document.querySelectorAll('.category').forEach(c => c.classList.remove('active'));
            category.classList.add('active');
            const categoryType = category.dataset.category;
            displayStoreGames(categoryType);
            playHoverSound();
        });
    });

    // Event listener para controles de audio
    if (audioToggle) {
        audioToggle.addEventListener('click', toggleMusic);
    }

    // Event listeners para controles de juegos
    const fullscreenButton = document.getElementById('fullscreenButton');
    const openDirectoryButton = document.getElementById('openDirectoryButton');
    const backToMenuButton = document.getElementById('backToMenuButton');

    if (fullscreenButton) {
        fullscreenButton.addEventListener('click', toggleFullscreen);
    }
    if (openDirectoryButton) {
        openDirectoryButton.addEventListener('click', openGameInNewTab);
    }
    if (backToMenuButton) {
        backToMenuButton.addEventListener('click', closeGame);
    }

    // Event listener para cerrar alerta
    const alertButton = document.getElementById('alertButton');
    const overlay = document.getElementById('overlay');

    if (alertButton) {
        alertButton.addEventListener('click', closeAlert);
    }
    if (overlay) {
        overlay.addEventListener('click', closeAlert);
    }

    // Mostrar juegos de la tienda por defecto
    displayStoreGames();

    console.log('Inicialización completada');
});
</script>
</body>
</html>
