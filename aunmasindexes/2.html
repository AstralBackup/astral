<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AstralProton</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
    /* Variables globales */
    :root {
        --primary-color: #0a0a2a;
        --secondary-color: #1a1a4a;
        --accent-color: #4169e1;
        --text-color: #ffffff;
        --highlight-color: #ff3366;
        --card-bg: rgba(26, 26, 74, 0.7);
        --card-hover: rgba(65, 105, 225, 0.3);
        --sidebar-bg: rgba(10, 10, 42, 0.95);
        --header-bg: rgba(10, 10, 42, 0.95);
        --transition-speed: 0.3s;
        --font-size-base: 16px;
        --font-size-small: 14px;
        --font-size-large: 18px;
        --folder-bg: rgba(26, 26, 74, 0.9);
        --folder-hover: rgba(65, 105, 225, 0.5);
    }
    
    /* Estilos base */
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }

    body {
        font-family: 'Montserrat', sans-serif;
        background-color: var(--primary-color);
        color: var(--text-color);
        overflow-x: hidden;
        font-size: var(--font-size-base);
        transition: background-color 0.5s ease, color 0.5s ease;
    }

    /* Tema claro */
    body.light-theme {
        --primary-color: #f0f2f5;
        --secondary-color: #e4e6eb;
        --accent-color: #4169e1;
        --text-color: #1c1e21;
        --highlight-color: #ff3366;
        --card-bg: rgba(255, 255, 255, 0.8);
        --card-hover: rgba(65, 105, 225, 0.1);
        --sidebar-bg: rgba(255, 255, 255, 0.95);
        --header-bg: rgba(255, 255, 255, 0.95);
        --folder-bg: rgba(240, 240, 240, 0.9);
        --folder-hover: rgba(65, 105, 225, 0.2);
    }

    /* Estilos para tamaños de fuente */
    body.font-small {
        --font-size-base: 14px;
        --font-size-small: 12px;
        --font-size-large: 16px;
    }

    body.font-large {
        --font-size-base: 18px;
        --font-size-small: 16px;
        --font-size-large: 20px;
    }

    /* Reducción de movimiento */
    body.reduced-motion * {
        animation-duration: 0.001s !important;
        transition-duration: 0.001s !important;
    }

    /* Fondo espacial */
    .space-background {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(135deg, #0a0a2a 0%, #1a1a4a 100%);
        z-index: -2;
        overflow: hidden;
        transition: background 0.5s ease;
    }

    body.light-theme .space-background {
        background: linear-gradient(135deg, #e0e5ff 0%, #f0f2f5 100%);
    }

    .stars {
        position: absolute;
        width: 100%;
        height: 100%;
        z-index: -1;
    }

    .star {
        position: absolute;
        background-color: #fff;
        border-radius: 50%;
        animation: twinkle var(--duration, 4s) infinite ease-in-out;
        opacity: var(--opacity, 0.7);
    }

    body.light-theme .star {
        background-color: #4169e1;
    }

    @keyframes twinkle {
        0%, 100% { opacity: var(--opacity, 0.7); }
        50% { opacity: 0.2; }
    }

    .nebula {
        position: absolute;
        border-radius: 50%;
        filter: blur(40px);
        opacity: 0.15;
        background: radial-gradient(circle, var(--color) 0%, transparent 70%);
        animation: pulse 8s infinite ease-in-out;
    }

    @keyframes pulse {
        0%, 100% { transform: scale(1); opacity: 0.15; }
        50% { transform: scale(1.1); opacity: 0.2; }
    }

    /* Pantalla de título */
    .splash-screen {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(135deg, #0a0a2a 0%, #1a1a4a 100%);
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        z-index: 9999;
        transition: opacity 1s ease;
    }

    .splash-logo {
        width: 250px;
        height: auto;
        margin-bottom: 2rem;
        animation: logoFloat 3s ease-in-out infinite;
    }

    @keyframes logoFloat {
        0%, 100% { transform: translateY(0); }
        50% { transform: translateY(-15px); }
    }

    .splash-button {
        padding: 1rem 3rem;
        background: linear-gradient(45deg, var(--accent-color), var(--highlight-color));
        color: white;
        border: none;
        border-radius: 30px;
        font-size: 1.2rem;
        font-weight: 700;
        text-transform: uppercase;
        cursor: pointer;
        transition: all 0.3s ease;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        position: relative;
        overflow: hidden;
    }

    .splash-button:hover {
        transform: scale(1.05);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.4);
    }

    /* Header */
    header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 1rem 2rem;
        background-color: var(--header-bg);
        backdrop-filter: blur(10px);
        position: sticky;
        top: 0;
        z-index: 100;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        transition: background-color 0.5s ease, box-shadow 0.5s ease;
    }

    .logo {
        font-size: 1.8rem;
        font-weight: 700;
        color: var(--text-color);
        text-transform: uppercase;
        letter-spacing: 2px;
        display: flex;
        align-items: center;
        gap: 0.5rem;
        transition: color 0.5s ease;
    }

    .search-container {
        position: relative;
        width: 300px;
    }

    .search-container input {
        width: 100%;
        padding: 0.7rem 1rem 0.7rem 2.5rem;
        border-radius: 25px;
        border: none;
        background-color: rgba(255, 255, 255, 0.1);
        color: var(--text-color);
        font-size: 0.9rem;
        transition: all var(--transition-speed);
    }

    .search-container i {
        position: absolute;
        left: 1rem;
        top: 50%;
        transform: translateY(-50%);
        color: rgba(255, 255, 255, 0.7);
        transition: color 0.5s ease;
    }

    .user-profile {
        display: flex;
        align-items: center;
        gap: 1rem;
    }

    .user-avatar {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        background-color: var(--accent-color);
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 1.2rem;
        color: var(--text-color);
        cursor: pointer;
        transition: all var(--transition-speed);
    }

    /* Layout principal */
    .main-container {
        display: flex;
        height: calc(100vh - 70px);
    }

    /* Sidebar */
    .sidebar {
        width: 80px;
        background-color: var(--sidebar-bg);
        backdrop-filter: blur(10px);
        display: flex;
        flex-direction: column;
        align-items: center;
        padding: 2rem 0;
        transition: width var(--transition-speed), background-color 0.5s ease;
        overflow: hidden;
        z-index: 90;
    }

    .sidebar:hover {
        width: 200px;
    }

    .sidebar-item {
        display: flex;
        align-items: center;
        width: 100%;
        padding: 1rem;
        color: var(--text-color);
        text-decoration: none;
        transition: all var(--transition-speed);
        margin-bottom: 0.5rem;
        cursor: pointer;
    }

    .sidebar-item i {
        font-size: 1.5rem;
        min-width: 40px;
        text-align: center;
    }

    .sidebar-item span {
        margin-left: 1rem;
        white-space: nowrap;
        opacity: 0;
        transition: opacity var(--transition-speed);
    }

    .sidebar:hover .sidebar-item span {
        opacity: 1;
    }

    .sidebar-item:hover, .sidebar-item.active {
        background-color: var(--accent-color);
        color: white;
    }

    .sidebar-item.active {
        border-left: 4px solid var(--highlight-color);
    }

    /* Contenido principal */
    .content {
        flex: 1;
        padding: 2rem;
        overflow-y: auto;
        position: relative;
    }

    .section-title {
        font-size: 1.8rem;
        font-weight: 700;
        margin-bottom: 1.5rem;
        display: flex;
        align-items: center;
        gap: 1rem;
    }

    /* Secciones de contenido */
    .content-section {
        display: none;
        animation: fadeIn 0.5s ease forwards;
    }

    .content-section.active {
        display: block;
    }

    /* Mensaje de bienvenida */
    .welcome-message {
        font-size: 3rem;
        font-weight: 700;
        text-align: center;
        margin: 2rem 0;
        background: linear-gradient(45deg, var(--accent-color), var(--highlight-color));
        -webkit-background-clip: text;
        background-clip: text;
        color: transparent;
        text-shadow: 0 5px 15px rgba(65, 105, 225, 0.3);
        animation: welcomeGlow 3s infinite;
    }

    @keyframes welcomeGlow {
        0%, 100% { text-shadow: 0 5px 15px rgba(65, 105, 225, 0.3); }
        50% { text-shadow: 0 5px 25px rgba(65, 105, 225, 0.7); }
    }

    .welcome-container {
        max-width: 800px;
        margin: 0 auto;
        padding: 2rem;
        background-color: var(--card-bg);
        border-radius: 15px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        text-align: center;
        position: relative;
        overflow: hidden;
        animation: slideUp 0.8s ease forwards;
        transition: background-color 0.5s ease, box-shadow 0.5s ease;
    }

    .welcome-text {
        font-size: 1.2rem;
        line-height: 1.8;
        margin-bottom: 1.5rem;
    }

    /* Categorías */
    .categories {
        display: flex;
        gap: 1rem;
        margin-bottom: 2rem;
        overflow-x: auto;
        padding-bottom: 1rem;
    }

    .category {
        padding: 0.7rem 1.5rem;
        background-color: rgba(255, 255, 255, 0.1);
        border-radius: 25px;
        white-space: nowrap;
        cursor: pointer;
        transition: all var(--transition-speed);
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }

    .category:hover, .category.active {
        background-color: var(--accent-color);
        color: white;
    }

    /* Filtros */
    .filters {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 2rem;
    }

    .filter-options {
        display: flex;
        gap: 1rem;
    }

    .filter-dropdown {
        position: relative;
        min-width: 180px;
    }

    .filter-dropdown-btn {
        width: 100%;
        padding: 0.7rem 1rem;
        background-color: rgba(255, 255, 255, 0.1);
        border: none;
        border-radius: 5px;
        color: var(--text-color);
        display: flex;
        justify-content: space-between;
        align-items: center;
        cursor: pointer;
        transition: all var(--transition-speed);
    }

    .filter-dropdown-content {
        position: absolute;
        top: 100%;
        left: 0;
        width: 100%;
        background-color: var(--secondary-color);
        border-radius: 5px;
        margin-top: 0.5rem;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        z-index: 10;
        max-height: 0;
        overflow: hidden;
        transition: max-height var(--transition-speed);
    }

    .filter-dropdown.active .filter-dropdown-content {
        max-height: 300px;
    }

    .filter-option {
        padding: 0.7rem 1rem;
        cursor: pointer;
        transition: background var(--transition-speed);
    }

    .filter-option.active {
        background-color: var(--accent-color);
        color: white;
    }

    /* Grid de juegos */
    .games-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
        gap: 1.5rem;
        margin-bottom: 2rem;
    }

    .game-card {
        position: relative;
        border-radius: 10px;
        overflow: hidden;
        background-color: var(--card-bg);
        transition: transform 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275), 
                    box-shadow 0.5s ease, 
                    background-color 0.3s ease,
                    border 0.3s ease;
        cursor: pointer;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        height: 200px;
        animation: cardAppear 0.8s ease forwards;
        opacity: 0;
        transform: translateY(30px);
        border: 2px solid transparent;
    }

    @keyframes cardAppear {
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    .game-card:hover {
        transform: translateY(-15px) scale(1.15);
        box-shadow: 0 15px 30px rgba(0, 0, 0, 0.3), 0 0 20px rgba(65, 105, 225, 0.4);
        background-color: var(--card-hover);
        z-index: 1;
        border: 2px solid white;
    }

    .game-thumbnail {
        width: 100%;
        height: 100%;
        object-fit: cover;
        transition: transform 0.5s cubic-bezier(0.19, 1, 0.22, 1);
    }

    .game-card:hover .game-thumbnail {
        transform: scale(1.2);
    }

    .game-info {
        position: absolute;
        bottom: 0;
        left: 0;
        width: 100%;
        padding: 1rem;
        background: linear-gradient(to top, rgba(0, 0, 0, 0.8), transparent);
        transition: all 0.5s cubic-bezier(0.19, 1, 0.22, 1);
    }

    .game-title {
        font-size: 1.2rem;
        font-weight: 700;
        margin-bottom: 0.3rem;
        text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
        transform: translateY(0);
        transition: transform 0.5s cubic-bezier(0.19, 1, 0.22, 1);
        color: white;
    }

    .game-artist {
        font-size: 0.9rem;
        opacity: 0.8;
        transform: translateY(0);
        transition: transform 0.5s cubic-bezier(0.19, 1, 0.22, 1), opacity 0.5s ease;
        color: white;
    }

    .play-button {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%) scale(0);
        width: 60px;
        height: 60px;
        border-radius: 50%;
        background-color: var(--highlight-color);
        display: flex;
        justify-content: center;
        align-items: center;
        color: white;
        font-size: 1.5rem;
        opacity: 0;
        transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        z-index: 2;
        box-shadow: 0 0 20px rgba(255, 51, 102, 0.5);
    }

    .game-card:hover .play-button {
        transform: translate(-50%, -50%) scale(1);
        opacity: 1;
        animation: playButtonPulse 2s infinite;
    }

    @keyframes playButtonPulse {
        0%, 100% { transform: translate(-50%, -50%) scale(1); box-shadow: 0 0 20px rgba(255, 51, 102, 0.5); }
        50% { transform: translate(-50%, -50%) scale(1.1); box-shadow: 0 0 30px rgba(255, 51, 102, 0.8); }
    }

    /* Carpetas de juegos */
    .folder-card {
        position: relative;
        border-radius: 10px;
        overflow: hidden;
        background-color: var(--folder-bg);
        transition: transform 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275), 
                    box-shadow 0.5s ease, 
                    background-color 0.3s ease,
                    border 0.3s ease;
        cursor: pointer;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        height: 200px;
        animation: cardAppear 0.8s ease forwards;
        opacity: 0;
        transform: translateY(30px);
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        text-align: center;
        padding: 1rem;
        border: 2px solid transparent;
    }

    .folder-icon {
        font-size: 4rem;
        color: var(--accent-color);
        margin-bottom: 1rem;
        transition: transform 0.3s ease, color 0.3s ease;
    }

    .folder-title {
        font-size: 1.4rem;
        font-weight: 700;
        margin-bottom: 0.5rem;
        color: var(--text-color);
    }

    .folder-count {
        font-size: 0.9rem;
        opacity: 0.8;
        color: var(--text-color);
    }

    /* Folder Content Modal */
    .folder-modal {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.8);
        backdrop-filter: blur(5px);
        z-index: 1000;
        display: flex;
        justify-content: center;
        align-items: center;
        opacity: 0;
        visibility: hidden;
        transition: opacity 0.3s ease, visibility 0.3s ease;
    }

    .folder-modal.show {
        opacity: 1;
        visibility: visible;
    }

    .folder-content {
        width: 90%;
        max-width: 1200px;
        max-height: 90vh;
        background-color: var(--primary-color);
        border-radius: 15px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        overflow: hidden;
        display: flex;
        flex-direction: column;
        transform: scale(0.9);
        transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    }

    .folder-modal.show .folder-content {
        transform: scale(1);
    }

    .folder-header {
        padding: 1.5rem;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .folder-header-title {
        font-size: 1.8rem;
        font-weight: 700;
        color: var(--text-color);
        display: flex;
        align-items: center;
        gap: 1rem;
    }

    .folder-close {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        background-color: rgba(255, 255, 255, 0.1);
        display: flex;
        justify-content: center;
        align-items: center;
        cursor: pointer;
        transition: all 0.3s ease;
        color: var(--text-color);
    }

    .folder-body {
        padding: 1.5rem;
        overflow-y: auto;
        max-height: calc(90vh - 80px);
    }

    .folder-games-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
        gap: 1.5rem;
    }

    /* Animaciones */
    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }

    @keyframes slideUp {
        from { transform: translateY(20px); opacity: 0; }
        to { transform: translateY(0); opacity: 1; }
    }

    /* Alerta */
    .alert {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%) scale(0.9);
        background-color: var(--secondary-color);
        border-radius: 10px;
        padding: 2rem;
        max-width: 90%;
        width: 500px;
        z-index: 1000;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        display: none;
        opacity: 0;
        transition: all 0.5s cubic-bezier(0.19, 1, 0.22, 1);
        border: 2px solid var(--accent-color);
        overflow: hidden;
    }

    .alert.show {
        display: block;
        opacity: 1;
        transform: translate(-50%, -50%) scale(1);
    }

    .alert-title {
        font-size: 1.5rem;
        font-weight: 700;
        margin-bottom: 1rem;
        color: var(--highlight-color);
    }

    .alert-message {
        margin-bottom: 1.5rem;
        line-height: 1.6;
    }

    .alert-button {
        padding: 0.7rem 1.5rem;
        background: linear-gradient(45deg, var(--accent-color), var(--highlight-color));
        color: white;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        font-weight: 600;
        transition: all 0.3s ease;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        position: relative;
        overflow: hidden;
    }

    .overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.7);
        z-index: 999;
        display: none;
        opacity: 0;
        transition: opacity 0.5s ease;
        backdrop-filter: blur(5px);
    }

    .overlay.show {
        display: block;
        opacity: 1;
    }

    /* Configuraciones */
    .settings-container {
        max-width: 800px;
        margin: 0 auto;
        padding: 2rem;
        background-color: var(--card-bg);
        border-radius: 15px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        position: relative;
        overflow: hidden;
        animation: slideUp 0.8s ease forwards;
        transition: background-color 0.5s ease, box-shadow 0.5s ease;
    }

    .settings-group {
        margin-bottom: 2rem;
        padding-bottom: 1.5rem;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }

    .settings-group:last-child {
        border-bottom: none;
        margin-bottom: 0;
        padding-bottom: 0;
    }

    .settings-title {
        font-size: 1.5rem;
        font-weight: 700;
        margin-bottom: 1rem;
        color: var(--accent-color);
    }

    .settings-option {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 1rem;
        padding: 1rem;
        background-color: rgba(255, 255, 255, 0.05);
        border-radius: 10px;
        transition: background-color 0.3s ease;
    }

    .settings-option-label {
        font-weight: 600;
    }

    .settings-option-description {
        font-size: 0.9rem;
        opacity: 0.7;
        margin-top: 0.3rem;
    }

    /* Toggle Switch */
    .toggle-switch {
        position: relative;
        display: inline-block;
        width: 60px;
        height: 34px;
    }

    .toggle-switch input {
        opacity: 0;
        width: 0;
        height: 0;
    }

    .toggle-slider {
        position: absolute;
        cursor: pointer;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: rgba(255, 255, 255, 0.2);
        transition: .4s;
        border-radius: 34px;
    }

    .toggle-slider:before {
        position: absolute;
        content: "";
        height: 26px;
        width: 26px;
        left: 4px;
        bottom: 4px;
        background-color: white;
        transition: .4s;
        border-radius: 50%;
    }

    input:checked + .toggle-slider {
        background-color: var(--accent-color);
    }

    input:checked + .toggle-slider:before {
        transform: translateX(26px);
    }

    /* Select */
    .settings-select {
        padding: 0.7rem 1rem;
        background-color: rgba(255, 255, 255, 0.1);
        border: none;
        border-radius: 5px;
        color: var(--text-color);
        font-size: 1rem;
        cursor: pointer;
        transition: background-color 0.3s ease;
        min-width: 150px;
    }

    /* Range Slider */
    .range-slider {
        width: 150px;
        display: flex;
        align-items: center;
    }

    .range-slider input {
        width: 100%;
        height: 5px;
        -webkit-appearance: none;
        background: rgba(255, 255, 255, 0.2);
        border-radius: 5px;
        outline: none;
    }

    .range-slider input::-webkit-slider-thumb {
        -webkit-appearance: none;
        appearance: none;
        width: 20px;
        height: 20px;
        border-radius: 50%;
        background: var(--accent-color);
        cursor: pointer;
        transition: background 0.3s ease;
    }

    .range-value {
        margin-left: 10px;
        min-width: 40px;
        text-align: center;
    }

    /* Radio Buttons */
    .radio-group {
        display: flex;
        gap: 1rem;
    }

    .radio-option {
        display: flex;
        align-items: center;
        cursor: pointer;
    }

    .radio-option input {
        display: none;
    }

    .radio-custom {
        width: 20px;
        height: 20px;
        border-radius: 50%;
        border: 2px solid rgba(255, 255, 255, 0.3);
        display: inline-block;
        position: relative;
        margin-right: 10px;
        transition: border-color 0.3s ease;
    }

    .radio-option input:checked + .radio-custom {
        border-color: var(--accent-color);
    }

    .radio-custom::after {
        content: '';
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%) scale(0);
        width: 10px;
        height: 10px;
        border-radius: 50%;
        background-color: var(--accent-color);
        transition: transform 0.3s ease;
    }

    .radio-option input:checked + .radio-custom::after {
        transform: translate(-50%, -50%) scale(1);
    }

    /* Button */
    .settings-button {
        padding: 0.7rem 1.5rem;
        background: linear-gradient(45deg, var(--accent-color), var(--highlight-color));
        color: white;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        font-weight: 600;
        transition: all 0.3s ease;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        position: relative;
        overflow: hidden;
    }

    /* Botón de juego aleatorio */
    .random-game-button {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0.5rem;
        padding: 0.8rem 1.5rem;
        background: linear-gradient(45deg, var(--accent-color), var(--highlight-color));
        color: white;
        border: none;
        border-radius: 30px;
        font-size: 1rem;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        margin: 1rem auto 2rem;
        position: relative;
        overflow: hidden;
        max-width: 300px;
        width: 100%;
    }

    /* NUEVOS ESTILOS PARA EL IFRAME Y CONTROLES */
    .game-iframe-container {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.9);
        z-index: 2000;
        display: none;
        flex-direction: column;
        justify-content: center;
        align-items: center;
    }

    .game-iframe {
        width: 90%;
        height: 85%;
        border: none;
        border-radius: 10px;
        box-shadow: 0 0 30px rgba(65, 105, 225, 0.5);
    }

    .game-controls {
        display: flex;
        gap: 1rem;
        margin-top: 1rem;
    }

    .game-control-button {
        padding: 0.7rem 1.5rem;
        background: linear-gradient(45deg, var(--accent-color), var(--highlight-color));
        color: white;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        font-weight: 600;
        transition: all 0.3s ease;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        position: relative;
        overflow: hidden;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0.5rem;
    }

    .game-control-button i {
        font-size: 1.2rem;
    }

    /* Botón de pantalla completa */
    .fullscreen-button {
        background: linear-gradient(45deg, #4169e1, #6a5acd);
    }

    /* Botón de volver al menú */
    .back-button {
        background: linear-gradient(45deg, #ff3366, #ff6b6b);
    }

    /* Estilos para pantalla completa */
    .game-iframe-container.fullscreen .game-iframe {
        width: 100%;
        height: 100%;
        border-radius: 0;
    }

    .game-iframe-container.fullscreen .game-controls {
        position: absolute;
        bottom: 20px;
        right: 20px;
        z-index: 2001;
    }

    /* Responsive */
    @media (max-width: 1200px) {
        .games-grid {
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
        }
        
        .folder-games-grid {
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
        }
    }

    @media (max-width: 992px) {
        .search-container {
            width: 200px;
        }
    }

    @media (max-width: 768px) {
        .sidebar {
            width: 60px;
        }
        
        .sidebar:hover {
            width: 180px;
        }
        
        .games-grid {
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
        }
        
        .folder-games-grid {
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
        }
    }

    @media (max-width: 576px) {
        header {
            padding: 1rem;
        }
        
        .logo {
            font-size: 1.5rem;
        }
        
        .search-container {
            width: 150px;
        }
        
        .content {
            padding: 1rem;
        }
        
        .games-grid {
            grid-template-columns: 1fr;
        }
        
        .folder-games-grid {
            grid-template-columns: 1fr;
        }

        .splash-logo {
            width: 200px;
        }
    }
</style>
</head>
<body>
<!-- Pantalla de título -->
<div class="splash-screen" id="splashScreen">
    <div class="stars" id="splashStars"></div>
    <img src="https://hebbkx1anhila5yf.public.blob.vercel-storage.com/astrallogo-Ukan4TsfqrcvSVlWpY5ILsBQnsAfAW.png" alt="AstralProton Logo" class="splash-logo">
    <button class="splash-button" id="startButton">Iniciar</button>
</div>

<!-- Fondo espacial -->
<div class="space-background">
    <div class="stars" id="stars"></div>
</div>

<!-- Header -->
<header>
    <div class="logo">
        <i class="fas fa-meteor"></i> <span class="logo-text" data-en="AstralProton" data-es="AstralProton">AstralProton</span>
    </div>
    <div class="search-container">
        <i class="fas fa-search"></i>
        <input type="text" placeholder="Buscar juegos..." id="searchInput" data-placeholder-en="Search games..." data-placeholder-es="Buscar juegos...">
    </div>
    <div class="user-profile">
        <div class="user-avatar">
            <i class="fas fa-user"></i>
        </div>
    </div>
</header>

<!-- Contenedor principal -->
<div class="main-container">
    <!-- Sidebar -->
    <div class="sidebar">
        <a class="sidebar-item active" data-section="home">
            <i class="fas fa-home"></i>
            <span data-en="Home" data-es="Inicio">Inicio</span>
        </a>
        <a class="sidebar-item" data-section="games">
            <i class="fas fa-gamepad"></i>
            <span data-en="Games" data-es="Juegos">Juegos</span>
        </a>
        <a class="sidebar-item" data-section="tutorials">
            <i class="fas fa-book"></i>
            <span data-en="Tutorials" data-es="Tutoriales">Tutoriales</span>
        </a>
        <a class="sidebar-item" data-section="settings">
            <i class="fas fa-cog"></i>
            <span data-en="Settings" data-es="Configuración">Configuración</span>
        </a>
    </div>

    <!-- Contenido principal -->
    <div class="content">
        <!-- Sección de inicio -->
        <div id="homeSection" class="content-section active">
            <h1 class="welcome-message" data-en="Welcome to AstralProton!" data-es="¡Bienvenido a AstralProton!">¡Bienvenido a AstralProton!</h1>
            <div class="welcome-container">
                <p class="welcome-text" data-en="Welcome back to AstralProton! Do you like this new interface? We encourage you to join our Discord server at this link: https://discord.gg/GEPrCZkWhs" data-es="¡Bienvenid@ de vuelta a AstralProton! ¿Te gusta esta nueva interfaz? Te recomendamos unirte a nuestro servidor de discord desde este link: https://discord.gg/GEPrCZkWhs">¡Bienvenid@ de vuelta a AstralProton! ¿Te gusta esta nueva interfaz? Te recomendamos unirte a nuestro servidor de discord desde este link: https://discord.gg/GEPrCZkWhs</p>
                <p class="welcome-text" data-en="Now, enjoy!" data-es="Sin mas preambulo, ¡A disfrutar!">Sin mas preambulo, ¡A disfrutar!</p>
                <p class="welcome-text" data-en="Note: In settings, if you want your desired configuration to be saved the next time you visit the page, click the SAVE SETTINGS button at the end of the section." data-es="Nota: En configuracion, si quieres que se guarde la configuracion deseada la proxima vez que visites la pagina, dale al boton GUARDAR CONFIGURACION al final del apartado.">Nota: En configuracion, si quieres que se guarde la configuracion deseada la proxima vez que visites la pagina, dale al boton GUARDAR CONFIGURACION al final del apartado.</p>
                <p class="welcome-text" data-en="Information not readable in english, please switch to spanish language." data-es="Ahora, te daremos mas informacion, esta no sera visible para aquellos que tengan la App en Ingles de manera oficial hasta una proxima drop.">Ahora, te daremos mas informacion, esta no sera visible para aquellos que tengan la App en Ingles de manera oficial hasta una proxima drop.</p>                            
                <p class="welcome-text" data-en="Information not readable in english, please switch to spanish language." data-es="Version: 03.05.2025abe">Version: 03.05.2025abe</p>
                <p class="welcome-text" data-en="Information not readable in english, please switch to spanish language." data-es="Significado de las letras del final:">Significado de las letras del final:</p>
                <p class="welcome-text" data-en="Information not readable in english, please switch to spanish language." data-es="a = Actualizacion con nuevo contenido.">a = Actualizacion con nuevo contenido.</p>
                <p class="welcome-text" data-en="Information not readable in english, please switch to spanish language." data-es="b = bugfix">b = bugfix</p>
                <p class="welcome-text" data-en="Information not readable in english, please switch to spanish language." data-es="e = Eliminacion de contenido">e = Eliminacion de contenido</p>
            </div>
        </div>
        
        <!-- Sección de juegos -->
        <div id="gamesSection" class="content-section">
            <h1 class="section-title">
                <i class="fas fa-gamepad"></i> <span data-en="Games" data-es="Juegos">Juegos</span>
            </h1>

            <!-- Categorías -->
            <div class="categories">
                <div class="category active" data-category="all">
                    <i class="fas fa-th-large"></i> <span data-en="All" data-es="Todos">Todos</span>
                </div>
                <div class="category" data-category="favorites">
                    <i class="fas fa-star"></i> <span data-en="Favorites" data-es="Favoritos">Favoritos</span>
                </div>
                <div class="category" data-category="action">
                    <i class="fas fa-running"></i> <span data-en="Action" data-es="Acción">Acción</span>
                </div>
                <div class="category" data-category="arcade">
                    <i class="fas fa-gamepad"></i> <span data-en="Arcade" data-es="Arcade">Arcade</span>
                </div>
                <div class="category" data-category="retro">
                    <i class="fas fa-ghost"></i> <span data-en="Retro" data-es="Retro">Retro</span>
                </div>
                <div class="category" data-category="puzzle">
                    <i class="fas fa-puzzle-piece"></i> <span data-en="Puzzle" data-es="Puzzle">Puzzle</span>
                </div>
                <div class="category" data-category="strategy">
                    <i class="fas fa-chess"></i> <span data-en="Strategy" data-es="Estrategia">Estrategia</span>
                </div>
            </div>

            <!-- Filtros -->
            <div class="filters">
                <div class="filter-options">
                    <div class="filter-dropdown" id="sortDropdown">
                        <button class="filter-dropdown-btn">
                            <span data-en="Versions (newest to oldest)" data-es="Versiones (reciente a antigua)">Versiones (reciente a antigua)</span>
                            <i class="fas fa-chevron-down"></i>
                        </button>
                        <div class="filter-dropdown-content">
                            <div class="filter-option active" data-en="Versions (newest to oldest)" data-es="Versiones (reciente a antigua)">Versiones (reciente a antigua)</div>
                            <div class="filter-option" data-en="Versions (oldest to newest)" data-es="Versiones (antigua a reciente)">Versiones (antigua a reciente)</div>
                            <div class="filter-option" data-en="Alphabetical (A-Z)" data-es="Alfabético (A-Z)">Alfabético (A-Z)</div>
                            <div class="filter-option" data-en="Alphabetical (Z-A)" data-es="Alfabético (Z-A)">Alfabético (Z-A)</div>
                        </div>
                    </div>
                    <div class="filter-dropdown" id="filterDropdown">
                        <button class="filter-dropdown-btn">
                            <span data-en="Your games first" data-es="Tus juegos primero">Tus juegos primero</span>
                            <i class="fas fa-chevron-down"></i>
                        </button>
                        <div class="filter-dropdown-content">
                            <div class="filter-option active" data-en="Your games first" data-es="Tus juegos primero">Tus juegos primero</div>
                            <div class="filter-option" data-en="Popular games" data-es="Juegos populares">Juegos populares</div>
                            <div class="filter-option" data-en="New games" data-es="Juegos nuevos">Juegos nuevos</div>
                        </div>
                    </div>
                </div>
                <div class="view-options">
                    <div class="view-option active">
                        <i class="fas fa-th-large"></i>
                    </div>
                    <div class="view-option">
                        <i class="fas fa-list"></i>
                    </div>
                </div>
            </div>

            <!-- Botón de juego aleatorio -->
            <button class="random-game-button" id="randomGameButton">
                <i class="fas fa-dice"></i>
                <span data-en="Random Game" data-es="Juego Aleatorio">Juego Aleatorio</span>
            </button>
            
            <!-- Grid de juegos -->
            <h2 class="section-title">AstralProton</h2>
            <div class="games-grid" id="gamesGrid">
                <!-- Los juegos se cargarán dinámicamente aquí -->
            </div>
        </div>
        
        <!-- Sección de tutoriales -->
        <div id="tutorialsSection" class="content-section">
            <h1 class="section-title">
                <i class="fas fa-book"></i> <span data-en="Tutorials" data-es="Tutoriales">Tutoriales</span>
            </h1>

            <!-- Categorías -->
            <div class="categories">
                <div class="category active" data-category="all">
                    <i class="fas fa-th-large"></i> <span data-en="All" data-es="Todos">Todos</span>
                </div>
                <div class="category" data-category="beginners">
                    <i class="fas fa-baby"></i> <span data-en="Beginners" data-es="Principiantes">Principiantes</span>
                </div>
                <div class="category" data-category="advanced">
                    <i class="fas fa-graduation-cap"></i> <span data-en="Advanced" data-es="Avanzados">Avanzados</span>
                </div>
                <div class="category" data-category="tips">
                    <i class="fas fa-lightbulb"></i> <span data-en="Tips & Tricks" data-es="Consejos">Consejos</span>
                </div>
                <div class="category" data-category="guides">
                    <i class="fas fa-map"></i> <span data-en="Guides" data-es="Guías">Guías</span>
                </div>
            </div>

            <!-- Filtros -->
            <div class="filters">
                <div class="filter-options">
                    <div class="filter-dropdown" id="tutorialSortDropdown">
                        <button class="filter-dropdown-btn">
                            <span data-en="Newest first" data-es="Más recientes primero">Más recientes primero</span>
                            <i class="fas fa-chevron-down"></i>
                        </button>
                        <div class="filter-dropdown-content">
                            <div class="filter-option active" data-en="Newest first" data-es="Más recientes primero">Más recientes primero</div>
                            <div class="filter-option" data-en="Oldest first" data-es="Más antiguos primero">Más antiguos primero</div>
                            <div class="filter-option" data-en="Alphabetical (A-Z)" data-es="Alfabético (A-Z)">Alfabético (A-Z)</div>
                            <div class="filter-option" data-en="Most viewed" data-es="Más vistos">Más vistos</div>
                        </div>
                    </div>
                    <div class="filter-dropdown" id="tutorialFilterDropdown">
                        <button class="filter-dropdown-btn">
                            <span data-en="All difficulty levels" data-es="Todos los niveles">Todos los niveles</span>
                            <i class="fas fa-chevron-down"></i>
                        </button>
                        <div class="filter-dropdown-content">
                            <div class="filter-option active" data-en="All difficulty levels" data-es="Todos los niveles">Todos los niveles</div>
                            <div class="filter-option" data-en="Easy" data-es="Fácil">Fácil</div>
                            <div class="filter-option" data-en="Medium" data-es="Medio">Medio</div>
                            <div class="filter-option" data-en="Hard" data-es="Difícil">Difícil</div>
                        </div>
                    </div>
                </div>
                <div class="view-options">
                    <div class="view-option active">
                        <i class="fas fa-th-large"></i>
                    </div>
                    <div class="view-option">
                        <i class="fas fa-list"></i>
                    </div>
                </div>
            </div>

            <!-- Grid de tutoriales -->
            <h2 class="section-title">Tutoriales</h2>
            <div class="games-grid" id="tutorialsGrid">
                <!-- Los tutoriales se cargarán dinámicamente aquí -->
            </div>
        </div>

        <!-- Sección de configuración -->
        <div id="settingsSection" class="content-section">
            <h1 class="section-title">
                <i class="fas fa-cog"></i> <span data-en="Settings" data-es="Configuración">Configuración</span>
            </h1>

            <div class="settings-container">
                <!-- Apariencia -->
                <div class="settings-group">
                    <h2 class="settings-title" data-en="Appearance" data-es="Apariencia">Apariencia</h2>
                    
                    <!-- Tema -->
                    <div class="settings-option">
                        <div>
                            <div class="settings-option-label" data-en="Theme" data-es="Tema">Tema</div>
                            <div class="settings-option-description" data-en="Choose between dark and light theme" data-es="Elige entre tema oscuro y claro">Elige entre tema oscuro y claro</div>
                        </div>
                        <div class="radio-group">
                            <label class="radio-option">
                                <input type="radio" name="theme" value="dark" checked>
                                <span class="radio-custom"></span>
                                <span data-en="Dark" data-es="Oscuro">Oscuro</span>
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="theme" value="light">
                                <span class="radio-custom"></span>
                                <span data-en="Light" data-es="Claro">Claro</span>
                            </label>
                        </div>
                    </div>

                    <!-- Tamaño de fuente -->
                    <div class="settings-option">
                        <div>
                            <div class="settings-option-label" data-en="Font Size" data-es="Tamaño de fuente">Tamaño de fuente</div>
                            <div class="settings-option-description" data-en="Adjust the text size" data-es="Ajusta el tamaño del texto">Ajusta el tamaño del texto</div>
                        </div>
                        <div class="radio-group">
                            <label class="radio-option">
                                <input type="radio" name="fontSize" value="small">
                                <span class="radio-custom"></span>
                                <span data-en="Small" data-es="Pequeño">Pequeño</span>
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="fontSize" value="medium" checked>
                                <span class="radio-custom"></span>
                                <span data-en="Medium" data-es="Mediano">Mediano</span>
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="fontSize" value="large">
                                <span class="radio-custom"></span>
                                <span data-en="Large" data-es="Grande">Grande</span>
                            </label>
                        </div>
                    </div>

                    <!-- Color de acento -->
                    <div class="settings-option">
                        <div>
                            <div class="settings-option-label" data-en="Accent Color" data-es="Color de acento">Color de acento</div>
                            <div class="settings-option-description" data-en="Choose the main color for buttons and highlights" data-es="Elige el color principal para botones y destacados">Elige el color principal para botones y destacados</div>
                        </div>
                        <select class="settings-select" id="accentColor">
                            <option value="#4169e1" data-en="Blue" data-es="Azul">Azul</option>
                            <option value="#9c27b0" data-en="Purple" data-es="Púrpura">Púrpura</option>
                            <option value="#e91e63" data-en="Pink" data-es="Rosa">Rosa</option>
                            <option value="#f44336" data-en="Red" data-es="Rojo">Rojo</option>
                            <option value="#ff9800" data-en="Orange" data-es="Naranja">Naranja</option>
                            <option value="#4caf50" data-en="Green" data-es="Verde">Verde</option>
                            <option value="#2196f3" data-en="Light Blue" data-es="Azul claro">Azul claro</option>
                        </select>
                    </div>

                    <!-- Animaciones -->
                    <div class="settings-option">
                        <div>
                            <div class="settings-option-label" data-en="Animations" data-es="Animaciones">Animaciones</div>
                            <div class="settings-option-description" data-en="Enable or disable animations" data-es="Activar o desactivar animaciones">Activar o desactivar animaciones</div>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="animationsToggle" checked>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                </div>

                <!-- Idioma -->
                <div class="settings-group">
                    <h2 class="settings-title" data-en="Language" data-es="Idioma">Idioma</h2>
                    
                    <div class="settings-option">
                        <div>
                            <div class="settings-option-label" data-en="Interface Language" data-es="Idioma de la interfaz">Idioma de la interfaz</div>
                            <div class="settings-option-description" data-en="Select your preferred language" data-es="Selecciona tu idioma preferido">Selecciona tu idioma preferido</div>
                        </div>
                        <select class="settings-select" id="languageSelect">
                            <option value="es">Español</option>
                            <option value="en">English</option>
                        </select>
                    </div>
                </div>

                <!-- Sonido -->
                <div class="settings-group">
                    <h2 class="settings-title" data-en="Sound" data-es="Sonido">Sonido</h2>
                    
                    <!-- Efectos de sonido -->
                    <div class="settings-option">
                        <div>
                            <div class="settings-option-label" data-en="Sound Effects" data-es="Efectos de sonido">Efectos de sonido</div>
                            <div class="settings-option-description" data-en="Enable or disable sound effects" data-es="Activar o desactivar efectos de sonido">Activar o desactivar efectos de sonido</div>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="soundEffectsToggle" checked>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>

                    <!-- Volumen de efectos -->
                    <div class="settings-option">
                        <div>
                            <div class="settings-option-label" data-en="Sound Effects Volume" data-es="Volumen de efectos">Volumen de efectos</div>
                            <div class="settings-option-description" data-en="Adjust the volume of sound effects" data-es="Ajusta el volumen de los efectos de sonido">Ajusta el volumen de los efectos de sonido</div>
                        </div>
                        <div class="range-slider">
                            <input type="range" min="0" max="100" value="50" id="soundEffectsVolume">
                            <span class="range-value">50%</span>
                        </div>
                    </div>

                    <!-- Música de fondo -->
                    <div class="settings-option">
                        <div>
                            <div class="settings-option-label" data-en="Background Music" data-es="Música de fondo">Música de fondo</div>
                            <div class="settings-option-description" data-en="Enable or disable background music" data-es="Activar o desactivar música de fondo">Activar o desactivar música de fondo</div>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="backgroundMusicToggle" checked>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>

                    <!-- Volumen de música -->
                    <div class="settings-option">
                        <div>
                            <div class="settings-option-label" data-en="Music Volume" data-es="Volumen de música">Volumen de música</div>
                            <div class="settings-option-description" data-en="Adjust the volume of background music" data-es="Ajusta el volumen de la música de fondo">Ajusta el volumen de la música de fondo</div>
                        </div>
                        <div class="range-slider">
                            <input type="range" min="0" max="100" value="30" id="backgroundMusicVolume">
                            <span class="range-value">30%</span>
                        </div>
                    </div>
                </div>

                <!-- Accesibilidad -->
                <div class="settings-group">
                    <h2 class="settings-title" data-en="Accessibility" data-es="Accesibilidad">Accesibilidad</h2>
                    
                    <!-- Movimiento reducido -->
                    <div class="settings-option">
                        <div>
                            <div class="settings-option-label" data-en="Reduced Motion" data-es="Movimiento reducido">Movimiento reducido</div>
                            <div class="settings-option-description" data-en="Reduce animations and motion effects" data-es="Reduce animaciones y efectos de movimiento">Reduce animaciones y efectos de movimiento</div>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="reducedMotionToggle">
                            <span class="toggle-slider"></span>
                        </label>
                    </div>

                    <!-- Alto contraste -->
                    <div class="settings-option">
                        <div>
                            <div class="settings-option-label" data-en="High Contrast" data-es="Alto contraste">Alto contraste</div>
                            <div class="settings-option-description" data-en="Increase contrast for better visibility" data-es="Aumenta el contraste para mejor visibilidad">Aumenta el contraste para mejor visibilidad</div>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="highContrastToggle">
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                </div>

                <!-- Privacidad -->
                <div class="settings-group">
                    <h2 class="settings-title" data-en="Privacy" data-es="Privacidad">Privacidad</h2>
                    
                    <!-- Cookies -->
                    <div class="settings-option">
                        <div>
                            <div class="settings-option-label" data-en="Save Settings in Cookies" data-es="Guardar configuración en cookies">Guardar configuración en cookies</div>
                            <div class="settings-option-description" data-en="Store your preferences for future visits" data-es="Almacena tus preferencias para futuras visitas">Almacena tus preferencias para futuras visitas</div>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="saveCookiesToggle" checked>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                </div>

                <!-- Botones de acción -->
                <div class="settings-group">
                    <div class="settings-option">
                        <button class="settings-button" id="resetSettingsButton" data-en="Reset to Default" data-es="Restablecer valores predeterminados">Restablecer valores predeterminados</button>
                        <button class="settings-button" id="saveSettingsButton" data-en="Save Settings" data-es="Guardar configuración">Guardar configuración</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Alerta -->
<div class="overlay" id="overlay"></div>
<div class="alert" id="alert">
    <div class="alert-title" id="alertTitle">Información</div>
    <div class="alert-message" id="alertMessage">Mensaje de alerta</div>
    <button class="alert-button" id="alertButton" data-en="Accept" data-es="Aceptar">Aceptar</button>
</div>

<!-- Modal de carpeta -->
<div class="folder-modal" id="folderModal">
    <div class="folder-content">
        <div class="folder-header">
            <div class="folder-header-title">
                <i class="fas fa-folder-open"></i>
                <span id="folderTitle">Nombre de la carpeta</span>
            </div>
            <div class="folder-close" id="folderClose">
                <i class="fas fa-times"></i>
            </div>
        </div>
        <div class="folder-body">
            <div class="folder-games-grid" id="folderGamesGrid">
                <!-- Los juegos de la carpeta se cargarán aquí -->
            </div>
        </div>
    </div>
</div>

<!-- Contenedor de iframe para juegos -->
<div class="game-iframe-container" id="gameIframeContainer">
    <iframe id="gameIframe" class="game-iframe" src="about:blank" frameborder="0" allowfullscreen></iframe>
    <div class="game-controls">
        <button class="game-control-button fullscreen-button" id="fullscreenButton">
            <i class="fas fa-expand"></i>
            <span data-en="Fullscreen" data-es="Pantalla Completa">Pantalla Completa</span>
        </button>
        <button class="game-control-button back-button" id="backButton">
            <i class="fas fa-arrow-left"></i>
            <span data-en="Back to Menu" data-es="Volver al Menú">Volver al Menú</span>
        </button>
    </div>
</div>

<!-- Audio element para la música y efectos de sonido -->
<audio id="audioPlayer"></audio>
<audio id="hoverSound"></audio>
<audio id="backgroundMusic" loop></audio>

<script>
// Datos de juegos
const gameData = [
    {
        title: "AstralTube",
        artist: "AstralTeam, Google - Youtube pero con miniaturas.",
        image: "imgjuegos/astrallogo.png",
        song: "titulonuevo.mp3",
        url: "tube.html",
        category: "all",
        isNew: true,
        isUpdate: false,
        alert: {
            type: "info",
            message: "¿Te sirvio la pagina?",
            redirect: "tube.html"
        }
    },
    {
        title: "Musica",
        artist: "Musica de toda la Aplicacion de Astral",
        image: "imgjuegos/astrallogo.png",
        song: "titulonuevo.mp3",
        url: "musica.html",
        category: "all",
        isNew: true,
        isUpdate: false,
        alert: {
            type: "info",
            message: "¿Cual es tu musica favorita de la pagina?",
            redirect: "musica.html"
        }
    },
    {
        title: "Tunnel Rush",
        artist: "Poki",
        image: "imgjuegos/tunnel.jpeg",
        song: "titulonuevo.mp3",
        url: "Juegos/tunnel-rush/index.html",
        category: "action",
        isNew: true,
        isUpdate: false,
        alert: {
            type: "loading",
            message: "Superate mi record de 1000 puntos.",
            redirect: "Juegos/tunnel-rush/index.html"
        }
    },    
    {
        title: "DON'T YOU LECTURE ME WITH YOUR THIRTY DOLLAR WEBSITE",
        artist: "GD COLON",
        image: "imgjuegos/30dollar.png",
        song: "titulonuevo.mp3",
        url: "Juegos/30dollarwebsite/index.html",
        category: "action",
        isNew: true,
        isUpdate: false,
        alert: {
            type: "loading",
            message: "Crea la mejor musica.",
            redirect: "Juegos/30dollarwebsite/index.html"
        }
    },
    {
        title: "2048",
        artist: "Poki",
        image: "imgjuegos/2014.png",
        song: "titulonuevo.mp3",
        url: "Juegos/2048/index.html",
        category: "action",
        isNew: true,
        isUpdate: false,
        alert: {
            type: "loading",
            message: "¡Sé INTELIGENTE y haz 2048!",
            redirect: "Juegos/2048/index.html"
        }
    },
    {
        title: "Slope 2",
        artist: "Y8",
        image: "imgjuegos/slope2.jpeg",
        song: "juegosmusica/slope.mp3",
        url: "Juegos/slope-2/index.html",
        category: "action",
        isNew: true,
        isUpdate: false,
        alert: {
            type: "loading",
            message: "¡Es hora de esquivar los obstaculos! Pero ahora con tu pana.",
            redirect: "Juegos/slope-2/index.html"
        }
    },
    {
        title: "Highway Racer",
        artist: "Bonecracker Games",
        image: "imgjuegos/highway.jpeg",
        song: "titulonuevo.mp3",
        url: "Juegos/hwy-rcer/index.html",
        category: "retro",
        isNew: true,
        isUpdate: false,
        alert: {
            type: "loading",
            message: "Un juego en donde debes de correr a toda velocidad y evitar los demas carros.",
            redirect: "Juegos/hwy-rcer/index.html"
        }
    },
    {
        title: "Stick Duel Battle",
        artist: "undefined",
        image: "imgjuegos/stick2.jpeg",
        song: "titulonuevo.mp3",
        url: "Juegos/stick-duel-battle/index.html",
        category: "retro",
        isNew: true,
        isUpdate: false,
        alert: {
            type: "loading",
            message: "Un juego en donde debes de pelear contra tu compa o contra un bot con pistolas o a puño.",
            redirect: "Juegos/stick-duel-battle/index.html"
        }
    },
    {
        title: "The World's Hardest Game",
        artist: "undefined",
        image: "imgjuegos/hard.jpeg",
        song: "titulonuevo.mp3",
        url: "Juegos/ita10/index.html",
        category: "retro",
        isNew: true,
        isUpdate: false,
        alert: {
            type: "loading",
            message: "El juego mas dificil del mundo, no te enojes si no puedes pasar el primer nivel. Esta demasiado dificil.",
            redirect: "Juegos/ita10/index.html"
        }
    },
    {
        title: "Stickman Hook",
        artist: "?",
        image: "imgjuegos/stick.jpeg",
        song: "titulonuevo.mp3",
        url: "Juegos/stickman-hook/index.html",
        category: "retro",
        isNew: true,
        isUpdate: false,
        alert: {
            type: "loading",
            message: "Un juego de balancearse como un loco, pero no te caigas.",
            redirect: "Juegos/stickman-hook/index.html"
        }
    },
    {
        title: "PolyTrack",
        artist: "PolyTrack",
        image: "imgjuegos/poly.jpeg",
        song: "titulonuevo.mp3",
        url: "Juegos/polytrack/index.html",
        category: "retro",
        isNew: true,
        isUpdate: false,
        alert: {
            type: "loading",
            message: "Un juego de carreras donde debes evitar los obstaculos y llegar a la meta.",
            redirect: "Juegos/polytrack/index.html"
        }
    },
    {
        title: "Tertis Chafa",
        artist: "NotArtistAvailable",
        image: "imgjuegos/tetris.jpg",
        song: "titulonuevo.mp3",
        url: "Juegos/ita11/index.html",
        category: "retro",
        isNew: true,
        isUpdate: false,
        alert: {
            type: "loading",
            message: "Crea una linea de 4 bloques para eliminarla, pero no dejes que se llene la pantalla.",
            redirect: "Juegos/ita11/index.html"
        }
    },
    {
        title: "A Dance of Fire and Ice",
        artist: "Ni idea crack",
        image: "imgjuegos/adofai.jpeg",
        song: "titulonuevo.mp3",    
        url: "Juegos/a-dance-of-fire-and-ice/index.html",
        category: "retro",
        isNew: true,
        isUpdate: false,
        alert: {
            type: "loading",
            message: "Music-rhythm game, donde debes seguir el ritmo de la musica, es un juego muy bueno.",
            redirect: "Juegos/a-dance-of-fire-and-ice/index.html"
        }
    },
    {
        title: "Google Snake",
        artist: "Google",
        image: "imgjuegos/snake.jpeg",
        song: "titulonuevo.mp3",    
        url: "Juegos/google-snake/index.html",
        category: "retro",
        isNew: true,
        isUpdate: false,
        alert: {
            type: "loading",
            message: "Comete esta manzana, pero no te comas a ti mismo. Poetico.",
            redirect: "Juegos/google-snake/index.html"
        }
    },
    {
        title: "Super Mario Combat",
        artist: "Sun-studios",
        image: "imgjuegos/mariocombat.jpeg",
        song: "juegosmusica/mariocombat.mp3",
        url: "Juegos/ita9/index.html",
        category: "retro",
        isNew: false,
        isUpdate: false,
        alert: {
            type: "loading",
            message: "Un juego de combate bien chidoris, muevete con las flechas y ataca con la letra a",
            redirect: "Juegos/ita9/index.html"
        }
    },
    {
        title: "BitLife",
        artist: "Ni idea crack",
        image: "imgjuegos/bitlife.png",
        song: "titulonuevo.mp3",
        url: "Juegos/bitlife/index.html",
        category: "retro",
        isNew: false,
        isUpdate: true,
        alert: {
            type: "loading",
            message: "No seas abogado, te arruinara la vida, creeme.",
            redirect: "Juegos/bitlife/index.html"
        }
    },
    {
        title: "Angry Birds",
        artist: "ROVIO",
        image: "imgjuegos/angry.jpeg",
        song: "juegosmusica/angry.mp3",
        url: "Juegos/angrybirds/index.html",
        category: "retro",
        isNew: false,
        isUpdate: true,
        alert: {
            type: "loading",
            message: "Nunca uses el pajaro azul >:l",
            redirect: "Juegos/angrybirds/index.html"
        }
    },
    {
        title: "Super Mario Versus",
        artist: "ipodtouch0218",
        image: "imgjuegos/smbv.png",
        song: "juegosmusica/mariocombat.mp3",
        url: "Juegos/mariovsluigi/index.html",
        category: "retro",
        isNew: true,
        isUpdate: false,
        alert: {
            type: "loading",
            message: "Un juego donde debes agarrar las estrellas, quien tenga mas gana, puedes jugar online! :)",
            redirect: "Juegos/mariovsluigi/index.html"
        }
    },
    {
        title: "Cat Tenis",
        artist: "AstralOriginals (Astral lo porteo)",
        image: "imgjuegos/cattenis.png",
        song: "juegosmusica/cattenis.mp3",
        url: "Juegos/cattenis/index.html",
        category: "puzzle",
        isNew: true,
        isUpdate: false,
        alert: {
            type: "loading",
            message: "Ganale en el tenis al gatito.",
            redirect: "Juegos/cattenis/index.html"
        }
    },
    {
        title: "Slowroads",
        artist: "slowroads.io",
        image: "imgjuegos/slowroad.jpeg",
        song: "juegosmusica/cattenis.mp3",
        url: "Juegos/slowroads/index.html",
        category: "puzzle",
        isNew: true,
        isUpdate: false,
        alert: {
            type: "loading",
            message: "Ganale en el tenis al gatito.",
            redirect: "Juegos/slowroads/index.html"
        }
    },
    {
        title: "8 Ball Pool",
        artist: "?",
        image: "imgjuegos/8ballpool.jpeg",
        song: "titulo.mp3",
        url: "Juegos/8ball/index.html",
        category: "puzzle",
        isNew: false,
        isUpdate: true,
        alert: {
            type: "loading",
            message: "¿Alguien realmente lee esto?",
            redirect: "Juegos/8ball/index.html"
        }
    },
    {
        title: "1v1.lol",
        artist: "?",
        image: "imgjuegos/1v1.png",
        song: "juegosmusica/run3.mp3",
        url: "Juegos/1v1fixed/index.html",
        category: "retro",
        isNew: false,
        isUpdate: true,
        alert: {
            type: "loading",
            message: "A ver si ahora si funciona este juego jajaja",
            redirect: "Juegos/1v1fixed/index.html"
        }
    },
    {
        title: "Run3",
        artist: "Ahora no sirve lo juro 😭",
        image: "imgjuegos/run3.jpeg",
        song: "juegosmusica/run3.mp3",
        url: "Juegos/run3fix2/index.html",
        category: "retro",
        isNew: false,
        isUpdate: true,
        alert: {
            type: "loading",
            message: "No sirve jaja",
            redirect: "Juegos/run3fix2/index.html"
        }
    },
    {
        title: "Astral Chess",
        artist: "AstralOriginals",
        image: "imgjuegos/astralchess.png",
        song: "titulonuevo.mp3",
        url: "Juegos/astralchess/index.html",
        category: "arcade",
        isNew: true,
        isUpdate: false,
        alert: {
            type: "info",
            message: "¡Recuerda siempre jugar con un amigo!",
            redirect: "Juegos/astralchess/index.html"
        }
    },
    {
        title: "Wii Simulation",
        artist: "The Onliine Project",
        image: "imgjuegos/Wii.png",
        song: "juegosmusica/wii.mp3",
        url: "Juegos/vwii/index.html",
        category: "retro",
        isNew: true,
        isUpdate: false,
        alert: {
            type: "info",
            message: "Nintendo no me demandes aaaa",
            redirect: "Juegos/vwii/index.html"
        }
    },
    {
        title: "Minecraft: Astral x Precision Client",
        artist: "Mojang/Precision Client",
        image: "imgjuegos/minecraft.jpg",
        song: "juegosmusica/mc.mp3",
        url: "Juegos/minecraft/index.html",
        category: "action",
        isNew: false,
        isUpdate: false,
        alert: {
            type: "loading",
            message: "¡Si quieres jugar con tus amigos abre el mundo a LAN!",
            redirect: "Juegos/minecraft/index.html"
        }
    },
    {
        title: "Mario Party 2",
        artist: "Nintendo",
        image: "imgjuegos/mp2.jpeg",
        song: "juegosmusica/mp2.mp3",
        url: "Juegos/MarioParty2/index.html",
        category: "retro",
        isNew: true,
        isUpdate: false,
        folder: "mario",
        alert: {
            type: "loading",
            message: "Cargando el juego... ¡Recuerda siempre ganarle al chango!",
            redirect: "Juegos/MarioParty2/index.html"
        }
    },
    {
        title: "Geometry Dash (Unity WebGL)",
        artist: "Not Avaible",
        image: "imgjuegos/gds.jpeg",
        song: "juegosmusica/gd.mp3",
        url: "Juegos/geometry-dash-lite/index.html",
        category: "all",
        isNew: true,
        isUpdate: false,
        alert: {
            type: "info",
            message: "Pasate time machine en 1 intento",
            redirect: "Juegos/geometry-dash-lite/index.html"
        }
    },
    {
        title: "Geometry Dash (Scratch)",
        artist: "Robert Nicholas Christian Topala",
        image: "imgjuegos/gds.jpeg",
        song: "juegosmusica/gd.mp3",
        url: "Juegos/geometrydash/index.html",
        category: "all",
        isNew: true,
        isUpdate: false,
        alert: {
            type: "info",
            message: "Pasate time machine en 1 intento",
            redirect: "Juegos/geometrydash/index.html"
        }
    },
    {
        title: "Tetris pirata",
        artist: "NA",
        image: "imgjuegos/tetris.jpg",
        song: "",
        url: "Juegos/tetris/index.html",
        category: "all",
        isNew: false,
        isUpdate: false,
        alert: {
            type: "info",
            message: "¡Bienvenido a Astral!",
            redirect: "mensaje.html"
        }
    },
    {
        title: "Super Mario Construct",
        artist: "LSS",
        image: "imgjuegos/SMC.jpeg",
        song: "juegosmusica/smc.mp3",
        url: "Juegos/MARIO.html",
        category: "retro",
        isNew: false,
        isUpdate: true,
        folder: "mario",
        alert: {
            type: "loading",
            message: "Cargando el juego... ¡No olvides usar tu creatividad al maximo!",
            redirect: "Juegos/MARIO.html"
        }
    },
    {
        title: "Sans",
        artist: "TobyFox?",
        image: "imgjuegos/sans.jpg",
        song: "juegosmusica/sans.mp3",
        url: "Juegos/sans/index.html",
        category: "retro",
        isNew: false,
        isUpdate: false,
        alert: {
            type: "loading",
            message: "¿Quieres pasar un mal rato?",
            redirect: "Juegos/sans/index.html"
        }
    },
    {
        title: "Stack Ball",
        artist: "NA",
        image: "imgjuegos/stackball.jpg",
        song: "titulo.mp3",
        url: "Juegos/stack/index.html",
        category: "retro",
        isNew: false,
        isUpdate: false,
        alert: {
            type: "loading",
            message: "No sé que decir aqui.",
            redirect: "Juegos/stack/index.html"
        }
    },
    {
        title: "AstralEmulator",
        artist: "Aplicacion basada en la app codigo abierto emulator.js modificada por AstralTeam",
        image: "imgjuegos/noimg.png",
        song: "titulo.mp3",
        url: "Juegos/AstralEmulator1.5/index.html",
        category: "retro",
        isNew: false,
        isUpdate: true,
        alert: {
            type: "loading",
            message: "¡Le recomendamos mucho Jugar Super Mario World!",
            redirect: "Juegos/AstralEmulator1.5/index.html"
        }
    },
    {
        title: "8 Ball Pool",
        artist: "?",
        image: "imgjuegos/8ballpool.jpeg",
        song: "titulo.mp3",
        url: "Juegos/ita8/index.html",
        category: "puzzle",
        isNew: false,
        isUpdate: false,
        alert: {
            type: "loading",
            message: "¿Alguien realmente lee esto?",
            redirect: "Juegos/ita8/index.html"
        }
    },
    {
        title: "Fireboy & Watergirl",
        artist: "?",
        image: "imgjuegos/FYW.jpeg",
        song: "titulo.mp3",
        url: "Juegos/firewater/index.html",
        category: "puzzle",
        isNew: false,
        isUpdate: false,
        alert: {
            type: "loading",
            message: "¿Cual personaje prefieres ser?",
            redirect: "Juegos/firewater/index.html"
        }
    },
    {
        title: "Cut the Rope",
        artist: "Zeptolabs",
        image: "imgjuegos/ctr.jpg",
        song: "juegosmusica/ctr.mp3",
        url: "Juegos/ctr/index.html",
        category: "puzzle",
        isNew: false,
        isUpdate: false,
        alert: {
            type: "loading",
            message: "¡La araña se llevara tu caramelo pronto!",
            redirect: "Juegos/ctr/index.html"
        }
    },
    {
        title: "DOOM",
        artist: "NA",
        image: "imgjuegos/doom.jpeg",
        song: "juegosmusica/doom.mp3",
        url: "Juegos/doom/index.html",
        category: "action",
        isNew: false,
        isUpdate: false,
        alert: {
            type: "loading",
            message: "¡No ejecutes esto en un cactus!",
            redirect: "Juegos/doom/index.html"
        }
    },
    {
        title: "Windows XP",
        artist: "Open Source Docker",
        image: "imgjuegos/winxp.jpeg",
        song: "titulo.mp3",
        url: "Juegos/winxp/VirtualXP.htm",
        category: "all",
        isNew: false,
        isUpdate: false,
        alert: {
            type: "loading",
            message: "¿Tan siquiera alguien usa esto?",
            redirect: "Juegos/winxp/VirtualXP.htm"
        }
    },
    {
        title: "FNF Garcello Mod",
        artist: "NA",
        image: "imgjuegos/fnfg.jpeg",
        song: "juegosmusica/fnfv.mp3",
        url: "Juegos/fnfg/index.html",
        category: "arcade",
        isNew: false,
        isUpdate: false,
        folder: "fnf",
        alert: {
            type: "loading",
            message: "¡No vayas a matar a Garcello!",
            redirect: "Juegos/fnfg/index.html"
        }
    },
    {
        title: "FNF",
        artist: "ninjamuffin",
        image: "imgjuegos/fnfviejo.jpeg",
        song: "juegosmusica/fnfv.mp3",
        url: "Juegos/fnfviejo/index.html",
        category: "arcade",
        isNew: false,
        isUpdate: false,
        folder: "fnf",
        alert: {
            type: "loading",
            message: "¡No pierdas!",
            redirect: "Juegos/fnfviejo/index.html"
        }
    },
    {
        title: "FNF Vs Shaggy",
        artist: "NA",
        image: "imgjuegos/fnfvsshaggy.jpeg",
        song: "juegosmusica/fnfv.mp3",
        url: "Juegos/fnfshaggy/index.html",
        category: "arcade",
        isNew: false,
        isUpdate: false,
        folder: "fnf",
        alert: {
            type: "loading",
            message: "¡Valiste Churro!",
            redirect: "Juegos/fnfshaggy/index.html"
        }
    },
    {
        title: "Super Mario 127",
        artist: "LSS",
        image: "imgjuegos/mario127.jpeg",
        song: "juegosmusica/mario127.mp3",
        url: "Juegos/MARIO127.html",
        category: "retro",
        isNew: false,
        isUpdate: false,
        folder: "mario",
        alert: {
            type: "loading",
            message: "¡No te caigas al vacio!",
            redirect: "Juegos/MARIO127.html"
        }
    },
    {
        title: "Slope",
        artist: "Y8",
        image: "imgjuegos/slope.jpg",
        song: "juegosmusica/slope.mp3",
        url: "Juegos/slope/index.html",
        category: "action",
        isNew: false,
        isUpdate: false,
        alert: {
            type: "loading",
            message: "¡Es hora de esquivar los obstaculos!",
            redirect: "Juegos/slope/index.html"
        }
    },
    {
        title: "Baldi",
        artist: "NA",
        image: "imgjuegos/baldi.jpg",
        song: "juegosmusica/baldi.mp3",
        url: "Juegos/baldi/index.html",
        category: "action",
        isNew: false,
        isUpdate: false,
        alert: {
            type: "loading",
            message: "Recuerda: ¡1+1 = 2!",
            redirect: "Juegos/baldi/index.html"
        }
    },
    {
        title: "Cookie Clicker",
        artist: "Ni idea crack",
        image: "imgjuegos/cookie.png",
        song: "titulo.mp3",
        url: "Juegos/cookie/index.html",
        category: "arcade",
        isNew: false,
        isUpdate: false,
        alert: {
            type: "loading",
            message: "¡Haz click en la galleta!",
            redirect: "Juegos/cookie/index.html"
        }
    },
    {
        title: "Five Nights at Freddy's",
        artist: "Scott",
        image: "imgjuegos/fnafbg.jpeg",
        song: "juegosmusica/fnaf.mp3",
        url: "Juegos/FNAF1/index.html",
        category: "action",
        isNew: false,
        isUpdate: false,
        alert: {
            type: "loading",
            message: "undefined",
            redirect: "Juegos/FNAF1/index.html"
        }
    },
    {
        title: "Mario Kart 64",
        artist: "Nintendo",
        image: "imgjuegos/mk64b.jpg",
        song: "juegosmusica/mk64.mp3",
        url: "Juegos/MarioKart64/index.html",
        category: "retro",
        isNew: false,
        isUpdate: true,
        folder: "mario",
        alert: {
            type: "loading",
            message: "¡Recuerda siempre pegarle al chango!",
            redirect: "Juegos/MarioKart64/index.html"
        }
    },
    {
        title: "Super Mario 64",
        artist: "Nintendo",
        image: "imgjuegos/mario64.jpg",
        song: "juegosmusica/mario64.mp3",
        url: "Juegos/SM64/index.html",
        category: "retro",
        isNew: false,
        isUpdate: false,
        folder: "mario",
        alert: {
            type: "loading",
            message: "¡No olvides tirar al pinguino por el vacio!",
            redirect: "Juegos/SM64/index.html"
        }
    },
    {
        title: "Sonic Mania",
        artist: "SEGA",
        image: "imgjuegos/mania.jpg",
        song: "juegosmusica/mania.mp3",
        url: "Juegos/mania/index.html",
        category: "retro",
        isNew: false,
        isUpdate: false,
        alert: {
            type: "info",
            message: "Cuando inicie el juego presiona ESC (Escape) en tu teclado para iniciar un mod menu, ahi elije el nivel porque el menu no sirve.",
            redirect: "Juegos/mania/index.html"
        }
    },
    {
        title: "Super Yoshi Construct",
        artist: "LSS",
        image: "imgjuegos/yfs.jpeg",
        song: "juegosmusica/smc.mp3",
        url: "Juegos/YOSHI.html",
        category: "retro",
        isNew: false,
        isUpdate: false,
        alert: {
            type: "loading",
            message: "¡No olvides usar tu creatividad al maximo!",
            redirect: "Juegos/YOSHI.html"
        }
    },
    {
        title: "Tomb of The Mask",
        artist: "NA",
        image: "imgjuegos/totm.jpg",
        song: "titulo.mp3",
        url: "Juegos/totm/index.html",
        category: "arcade",
        isNew: false,
        isUpdate: false,
        alert: {
            type: "loading",
            message: "¡Veremos quien es el mejor!",
            redirect: "Juegos/totm/index.html"
        }
    },
    {
        title: "Subway Surfers",
        artist: "SYBO Games",
        image: "imgjuegos/SBS.jpeg",
        song: "juegosmusica/sbs.mp3",
        url: "Juegos/subwaysurferssanfrancisco/index.html",
        category: "arcade",
        isNew: false,
        isUpdate: false,
        alert: {
            type: "loading",
            message: "¿Superaras mi bellisimo record de 28765? :o",
            redirect: "Juegos/subwaysurferssanfrancisco/index.html"
        }
    },
    {
        title: "Henry Stickmin: BTB",
        artist: "Puffballs United & Newgrounds",
        image: "imgjuegos/btb.jpeg",
        song: "juegosmusica/hsita.mp3",
        url: "Juegos/ita3/index.html",
        category: "strategy",
        isNew: false,
        isUpdate: false,
        folder: "henry",
        alert: {
            type: "info",
            message: "Recomendamos pantalla completa.",
            redirect: "Juegos/ita3/index.html"
        }
    },
    {
        title: "Henry Stickmin: ETP",
        artist: "Puffballs United & Newgrounds",
        image: "imgjuegos/etp.jpeg",
        song: "juegosmusica/hsita.mp3",
        url: "Juegos/ita4/index.html",
        category: "strategy",
        isNew: false,
        isUpdate: false,
        folder: "henry",
        alert: {
            type: "info",
            message: "Recomendamos pantalla completa.",
            redirect: "Juegos/ita4/index.html"
        }
    },
    {
        title: "Henry Stickmin: STD",
        artist: "Puffballs United & Newgrounds",
        image: "imgjuegos/std.jpeg",
        song: "juegosmusica/hsita.mp3",
        url: "Juegos/ita5/index.html",
        category: "strategy",
        isNew: false,
        isUpdate: false,
        folder: "henry",
        alert: {
            type: "info",
            message: "Recomendamos pantalla completa.",
            redirect: "Juegos/ita5/index.html"
        }
    },
    {
        title: "Henry Stickmin: ITA",
        artist: "Puffballs United & Newgrounds",
        image: "imgjuegos/ita.jpg",
        song: "juegosmusica/hsita.mp3",
        url: "Juegos/ita/index.html",
        category: "strategy",
        isNew: false,
        isUpdate: false,
        folder: "henry",
        alert: {
            type: "info",
            message: "Recomendamos pantalla completa.",
            redirect: "Juegos/ita/index.html"
        }
    },
    {
        title: "Henry Stickmin: FTC",
        artist: "Puffballs United & Newgrounds",
        image: "imgjuegos/ftc.jpeg",
        song: "juegosmusica/hsita.mp3",
        url: "Juegos/ita6/index.html",
        category: "strategy",
        isNew: false,
        isUpdate: false,
        folder: "henry",
        alert: {
            type: "info",
            message: "Recomendamos pantalla completa.",
            redirect: "Juegos/ita6/index.html"
        }
    },
    {
        title: "The Binding Of Isaac - FL",
        artist: "Edmund McMillen, Florian Himsl",
        image: "imgjuegos/isaacico.jpg",
        song: "juegosmusica/isaac.mp3",
        url: "Juegos/ita2/index.html",
        category: "action",
        isNew: false,
        isUpdate: false,
        alert: {
            type: "info",
            message: "Recomendamos pantalla completa.",
            redirect: "Juegos/ita2/index.html"
        }
    },
    {
        title: "Crossy Road",
        artist: "Hipster Whale",
        image: "imgjuegos/crossy.jpg",
        song: "juegosmusica/tloi.mp3",
        url: "Juegos/crossyroad/index.html",
        category: "arcade",
        isNew: false,
        isUpdate: false,
        alert: {
            type: "loading",
            message: "¡Mira 2 veces antes de cruzar la calle!",
            redirect: "Juegos/crossyroad/index.html"
        }
    },
    {
        title: "Bad Ice Cream 1",
        artist: "NA",
        image: "Juegos/badicecream/bad-ice-cream.png",
        song: "titulo.mp3",
        url: "Juegos/badicecream/index.html",
        category: "puzzle",
        isNew: false,
        isUpdate: false,
        alert: {
            type: "loading",
            message: "¿Realmente alguien juega esto? Ya ni sé porque lo meti.",
            redirect: "Juegos/badicecream/index.html"
        }
    }
];

// Definición de carpetas
const folders = [
    {
        id: 'fnf',
        title: 'Friday Night Funkin',
        icon: 'fas fa-folder-open',
        games: ['FNF', 'FNF Garcello Mod', 'FNF Vs Shaggy']
    },
    {
        id: 'mario',
        title: 'Super Mario',
        icon: 'fas fa-folder-open',
        games: ['Super Mario Construct', 'Super Mario 127', 'Mario Kart 64', 'Super Mario 64', 'Mario Party 2']
    },
    {
        id: 'henry',
        title: 'Henry Stickmin',
        icon: 'fas fa-folder-open',
        games: ['Henry Stickmin: BTB', 'Henry Stickmin: ETP', 'Henry Stickmin: STD', 'Henry Stickmin: ITA', 'Henry Stickmin: FTC']
    }
];

// Configuración por defecto
const defaultSettings = {
    theme: 'dark',
    fontSize: 'medium',
    accentColor: '#4169e1',
    animations: true,
    language: 'es',
    soundEffects: true,
    soundEffectsVolume: 50,
    backgroundMusic: true,
    backgroundMusicVolume: 30,
    reducedMotion: false,
    highContrast: false,
    saveCookies: true
};

// Configuración actual
let currentSettings = { ...defaultSettings };

// Precarga de sonidos
const hoverSoundSrc = "sfx.mp3";
const backgroundMusicSrc = "titulonuevo.mp3";

// Función para guardar configuración en cookies
function saveSettingsToCookies() {
    if (currentSettings.saveCookies) {
        const expiryDate = new Date();
        expiryDate.setFullYear(expiryDate.getFullYear() + 1);
        document.cookie = `astralSettings=${JSON.stringify(currentSettings)};expires=${expiryDate.toUTCString()};path=/;SameSite=Strict`;
    }
}

// Función para cargar configuración desde cookies
function loadSettingsFromCookies() {
    const cookies = document.cookie.split(';');
    for (let cookie of cookies) {
        const [name, value] = cookie.trim().split('=');
        if (name === 'astralSettings') {
            try {
                const savedSettings = JSON.parse(value);
                currentSettings = { ...defaultSettings, ...savedSettings };
                return true;
            } catch (e) {
                console.error('Error parsing settings from cookies:', e);
                return false;
            }
        }
    }
    return false;
}

// Función para aplicar la configuración
function applySettings() {
    // Tema
    if (currentSettings.theme === 'light') {
        document.body.classList.add('light-theme');
        document.querySelector('input[name="theme"][value="light"]').checked = true;
    } else {
        document.body.classList.remove('light-theme');
        document.querySelector('input[name="theme"][value="dark"]').checked = true;
    }

    // Tamaño de fuente
    document.body.classList.remove('font-small', 'font-large');
    if (currentSettings.fontSize !== 'medium') {
        document.body.classList.add(`font-${currentSettings.fontSize}`);
    }
    document.querySelector(`input[name="fontSize"][value="${currentSettings.fontSize}"]`).checked = true;

    // Color de acento
    document.documentElement.style.setProperty('--accent-color', currentSettings.accentColor);
    document.getElementById('accentColor').value = currentSettings.accentColor;

    // Animaciones
    document.getElementById('animationsToggle').checked = currentSettings.animations;
    if (!currentSettings.animations) {
        document.body.classList.add('reduced-motion');
    } else {
        document.body.classList.remove('reduced-motion');
    }

    // Idioma
    document.getElementById('languageSelect').value = currentSettings.language;
    applyLanguage(currentSettings.language);

    // Efectos de sonido
    document.getElementById('soundEffectsToggle').checked = currentSettings.soundEffects;
    document.getElementById('soundEffectsVolume').value = currentSettings.soundEffectsVolume;
    document.querySelector('#soundEffectsVolume + .range-value').textContent = `${currentSettings.soundEffectsVolume}%`;

    // Música de fondo
    document.getElementById('backgroundMusicToggle').checked = currentSettings.backgroundMusic;
    document.getElementById('backgroundMusicVolume').value = currentSettings.backgroundMusicVolume;
    document.querySelector('#backgroundMusicVolume + .range-value').textContent = `${currentSettings.backgroundMusicVolume}%`;
    document.getElementById('backgroundMusic').volume = currentSettings.backgroundMusicVolume / 100;

    // Movimiento reducido
    document.getElementById('reducedMotionToggle').checked = currentSettings.reducedMotion;
    if (currentSettings.reducedMotion) {
        document.body.classList.add('reduced-motion');
    } else if (currentSettings.animations) {
        document.body.classList.remove('reduced-motion');
    }

    // Alto contraste
    document.getElementById('highContrastToggle').checked = currentSettings.highContrast;

    // Guardar en cookies
    document.getElementById('saveCookiesToggle').checked = currentSettings.saveCookies;
}

// Función para aplicar el idioma
function applyLanguage(language) {
    const elements = document.querySelectorAll('[data-' + language + ']');
    elements.forEach(element => {
        if (element.tagName === 'INPUT' && element.getAttribute('placeholder')) {
            element.placeholder = element.getAttribute('data-placeholder-' + language);
        } else {
            element.textContent = element.getAttribute('data-' + language);
        }
    });
}

// Crear estrellas para el fondo espacial
function createSpaceBackground(container) {
    const stars = document.getElementById(container);
    const starsCount = 200;
    
    // Crear estrellas
    for (let i = 0; i < starsCount; i++) {
        const star = document.createElement('div');
        star.className = 'star';
        
        // Tamaño aleatorio
        const size = Math.random() * 3;
        star.style.width = `${size}px`;
        star.style.height = `${size}px`;
        
        // Posición aleatoria
        star.style.left = `${Math.random() * 100}%`;
        star.style.top = `${Math.random() * 100}%`;
        
        // Animación aleatoria
        star.style.setProperty('--duration', `${3 + Math.random() * 7}s`);
        star.style.setProperty('--opacity', `${0.5 + Math.random() * 0.5}`);
        
        // Retraso aleatorio
        star.style.animationDelay = `${Math.random() * 5}s`;
        
        stars.appendChild(star);
    }
    
    // Crear nebulosas
    const colors = ['#4169e1', '#ff3366', '#9370db'];
    for (let i = 0; i < 5; i++) {
        const nebula = document.createElement('div');
        nebula.className = 'nebula';
        
        // Tamaño aleatorio
        const size = 150 + Math.random() * 300;
        nebula.style.width = `${size}px`;
        nebula.style.height = `${size}px`;
        
        // Posición aleatoria
        nebula.style.left = `${Math.random() * 100}%`;
        nebula.style.top = `${Math.random() * 100}%`;
        
        // Color aleatorio
        const color = colors[Math.floor(Math.random() * colors.length)];
        nebula.style.setProperty('--color', color);
        
        // Animación aleatoria
        nebula.style.animationDelay = `${Math.random() * 5}s`;
        
        stars.appendChild(nebula);
    }
}

// Inicializar la música de fondo
function initBackgroundMusic() {
    const backgroundMusic = document.getElementById('backgroundMusic');
    backgroundMusic.src = backgroundMusicSrc;
    backgroundMusic.volume = currentSettings.backgroundMusicVolume / 100;
    
    if (currentSettings.backgroundMusic) {
        backgroundMusic.play().catch(err => {
            console.error('Error al reproducir música de fondo:', err);
        });
    }
}

// Función para activar el cursor de carga
function showLoadingCursor() {
    document.body.classList.add('loading');
}

// Función para desactivar el cursor de carga
function hideLoadingCursor() {
    document.body.classList.remove('loading');
}

// Reproducir sonido al pasar el ratón
function playHoverSound() {
    // No reproducir sonidos si hay un juego activo
    if (window.gameActive) return;
    
    if (currentSettings.soundEffects) {
        const sound = document.getElementById('hoverSound');
        sound.src = hoverSoundSrc;
        sound.volume = currentSettings.soundEffectsVolume / 100;
        sound.play().catch(err => {
            console.error('Error reproduciendo sonido de hover:', err);
        });
    }
}

// Función para crear una tarjeta de juego
function createGameCard(game, index) {
    const gameCard = document.createElement('div');
    gameCard.className = 'game-card';
    gameCard.setAttribute('data-song', game.song);
    
    // Añadir retraso de animación basado en el índice
    gameCard.style.animationDelay = `${index * 0.1}s`;
    
    // Crear HTML de la tarjeta
    gameCard.innerHTML = `
        <img src="${game.image}" alt="${game.title}" class="game-thumbnail" onerror="this.src='imgjuegos/noimg.png'">
        <div class="game-info">
            <div class="game-title">${game.title}</div>
            <div class="game-artist">${game.artist}</div>
        </div>
        <div class="play-button">
            <i class="fas fa-play"></i>
        </div>
        ${game.isNew ? '<div class="game-badge">NUEVO</div>' : ''}
        ${game.isUpdate ? '<div class="game-badge update">ACTUALIZADO</div>' : ''}
    `;
    
    // Evento al hacer clic en la tarjeta
    gameCard.addEventListener('click', () => {
        loadGameInIframe(game.url, game.title);
    });
    
    // Evento al pasar el cursor sobre la tarjeta
    gameCard.addEventListener('mouseenter', () => {
        if (currentSettings.soundEffects) {
            const audioPlayer = document.getElementById('audioPlayer');
            if (game.song) {
                audioPlayer.src = game.song;
                audioPlayer.volume = currentSettings.soundEffectsVolume / 100;
                audioPlayer.play().catch(err => {
                    console.error('Error al reproducir audio:', err);
                });
            }
            
            playHoverSound();
        }
    });
    
    return gameCard;
}

// Función para cargar un juego en el iframe
function loadGameInIframe(url, title) {
    const gameIframe = document.getElementById('gameIframe');
    const gameIframeContainer = document.getElementById('gameIframeContainer');
    
    // Establecer la URL del juego
    gameIframe.src = url;
    
    // Mostrar el contenedor del iframe
    gameIframeContainer.style.display = 'flex';
    
    // Pausar la música de fondo si está reproduciéndose
    const backgroundMusic = document.getElementById('backgroundMusic');
    if (backgroundMusic) {
        // Guardar el estado actual para saber si debemos reanudar después
        backgroundMusic.dataset.wasPlaying = !backgroundMusic.paused;
        backgroundMusic.pause();
    }
    
    // Pausar cualquier efecto de sonido que esté reproduciéndose
    const audioPlayer = document.getElementById('audioPlayer');
    if (audioPlayer) {
        audioPlayer.pause();
        audioPlayer.currentTime = 0;
    }
    
    const hoverSound = document.getElementById('hoverSound');
    if (hoverSound) {
        hoverSound.pause();
        hoverSound.currentTime = 0;
    }
    
    // Establecer un estado global para indicar que un juego está activo
    window.gameActive = true;
}

// Cargar juegos en el grid
function loadGames(category = 'all') {
    const gamesGrid = document.getElementById('gamesGrid');
    gamesGrid.innerHTML = '';
    
    // Crear un conjunto para rastrear qué juegos ya están en carpetas
    const gamesInFolders = new Set();
    
    // Primero, agregar las carpetas
    folders.forEach((folder, index) => {
        // Verificar si hay juegos en esta carpeta para la categoría actual
        const folderGames = getGamesInFolder(folder.id);
        const hasGamesInCategory = category === 'all' || folderGames.some(game => game.category === category);
        
        if (hasGamesInCategory) {
            const folderCard = createFolderCard(folder, index);
            gamesGrid.appendChild(folderCard);
            
            // Marcar estos juegos como ya incluidos en carpetas
            folderGames.forEach(game => {
                gamesInFolders.add(game.title);
            });
        }
    });
    
    // Filtrar juegos por categoría y excluir los que ya están en carpetas
    const filteredGames = gameData.filter(game => {
        const matchesCategory = category === 'all' || game.category === category;
        const notInFolder = !gamesInFolders.has(game.title);
        return matchesCategory && notInFolder;
    });
    
    // Crear tarjetas para los juegos filtrados
    filteredGames.forEach((game, index) => {
        const gameCard = createGameCard(game, index);
        gamesGrid.appendChild(gameCard);
    });
}

// Función para obtener juegos de una carpeta
function getGamesInFolder(folderId) {
    const folder = folders.find(f => f.id === folderId);
    if (!folder) return [];
    
    return gameData.filter(game => {
        return folder.games.includes(game.title);
    });
}

// Función para crear una tarjeta de carpeta
function createFolderCard(folder, index) {
    const folderCard = document.createElement('div');
    folderCard.className = 'folder-card';
    folderCard.setAttribute('data-folder-id', folder.id);
    
    // Añadir retraso de animación basado en el índice
    folderCard.style.animationDelay = `${index * 0.1}s`;
    
    // Contar juegos en la carpeta
    const gamesCount = getGamesInFolder(folder.id).length;
    
    // Crear HTML de la carpeta
    folderCard.innerHTML = `
        <i class="fas ${folder.icon} folder-icon"></i>
        <div class="folder-title">${folder.title}</div>
        <div class="folder-count">${gamesCount} juegos</div>
    `;
    
    // Evento al hacer clic en la carpeta
    folderCard.addEventListener('click', () => {
        openFolder(folder.id);
    });
    
    // Evento al pasar el cursor sobre la carpeta
    folderCard.addEventListener('mouseenter', playHoverSound);
    
    return folderCard;
}

// Función para abrir una carpeta
function openFolder(folderId) {
    const folder = folders.find(f => f.id === folderId);
    if (!folder) return;
    
    const folderGames = getGamesInFolder(folderId);
    const folderModal = document.getElementById('folderModal');
    const folderTitle = document.getElementById('folderTitle');
    const folderGamesGrid = document.getElementById('folderGamesGrid');
    
    // Configurar título de la carpeta
    folderTitle.textContent = folder.title;
    
    // Limpiar y cargar juegos en la carpeta
    folderGamesGrid.innerHTML = '';
    
    folderGames.forEach((game, index) => {
        const gameCard = createGameCard(game, index);
        folderGamesGrid.appendChild(gameCard);
    });
    
    // Mostrar modal
    folderModal.classList.add('show');
}

// Función para crear una tarjeta de tutorial
function createTutorialCard(tutorial, index) {
    const tutorialCard = document.createElement('div');
    tutorialCard.className = 'game-card';
    
    // Añadir retraso de animación basado en el índice
    tutorialCard.style.animationDelay = `${index * 0.1}s`;
    
    // Crear HTML de la tarjeta
    tutorialCard.innerHTML = `
        <img src="${tutorial.image}" alt="${tutorial.title}" class="game-thumbnail" onerror="this.src='imgjuegos/noimg.png'">
        <div class="game-info">
            <div class="game-title">${tutorial.title}</div>
            <div class="game-artist">${tutorial.author}</div>
        </div>
        <div class="play-button">
            <i class="fas fa-book-open"></i>
        </div>
        ${tutorial.isNew ? '<div class="game-badge">NUEVO</div>' : ''}
        ${tutorial.isUpdate ? '<div class="game-badge update">ACTUALIZADO</div>' : ''}
    `;
    
    // Evento al hacer clic en la tarjeta
    tutorialCard.addEventListener('click', () => {
        loadGameInIframe(tutorial.alert.redirect, tutorial.title);
    });
    
    // Evento al pasar el cursor sobre la tarjeta
    tutorialCard.addEventListener('mouseenter', playHoverSound);
    
    return tutorialCard;
}

// Cargar tutoriales en el grid
function loadTutorials(category = 'all') {
    const tutorialsGrid = document.getElementById('tutorialsGrid');
    tutorialsGrid.innerHTML = '';
    
    // Filtrar tutoriales por categoría
    const filteredTutorials = tutorialData.filter(tutorial => {
        return category === 'all' || tutorial.category === category;
    });
    
    // Crear tarjetas para los tutoriales filtrados
    filteredTutorials.forEach((tutorial, index) => {
        const tutorialCard = createTutorialCard(tutorial, index);
        tutorialsGrid.appendChild(tutorialCard);
    });
}

// Configurar controles del iframe
function setupIframeControls() {
    const gameIframeContainer = document.getElementById('gameIframeContainer');
    const gameIframe = document.getElementById('gameIframe');
    const fullscreenButton = document.getElementById('fullscreenButton');
    const backButton = document.getElementById('backButton');
    
    // Botón de pantalla completa
    fullscreenButton.addEventListener('click', () => {
        if (!document.fullscreenElement) {
            // Entrar en modo pantalla completa
            if (gameIframeContainer.requestFullscreen) {
                gameIframeContainer.requestFullscreen();
            } else if (gameIframeContainer.webkitRequestFullscreen) {
                gameIframeContainer.webkitRequestFullscreen();
            } else if (gameIframeContainer.msRequestFullscreen) {
                gameIframeContainer.msRequestFullscreen();
            }
            gameIframeContainer.classList.add('fullscreen');
            fullscreenButton.querySelector('span').textContent = currentSettings.language === 'es' ? 'Salir de Pantalla Completa' : 'Exit Fullscreen';
            fullscreenButton.querySelector('i').className = 'fas fa-compress';
        } else {
            // Salir del modo pantalla completa
            if (document.exitFullscreen) {
                document.exitFullscreen();
            } else if (document.webkitExitFullscreen) {
                document.webkitExitFullscreen();
            } else if (document.msExitFullscreen) {
                document.msExitFullscreen();
            }
            gameIframeContainer.classList.remove('fullscreen');
            fullscreenButton.querySelector('span').textContent = currentSettings.language === 'es' ? 'Pantalla Completa' : 'Fullscreen';
            fullscreenButton.querySelector('i').className = 'fas fa-expand';
        }
    });
    
    // Botón de volver al menú
    backButton.addEventListener('click', () => {
        // Ocultar el contenedor del iframe
        gameIframeContainer.style.display = 'none';
        
        // Detener el juego limpiando el iframe
        gameIframe.src = 'about:blank';
        
        // Indicar que ya no hay un juego activo
        window.gameActive = false;
        
        // Reanudar la música de fondo solo si estaba activada y sonando antes
        const backgroundMusic = document.getElementById('backgroundMusic');
        if (currentSettings.backgroundMusic && backgroundMusic.dataset.wasPlaying === "true") {
            backgroundMusic.play().catch(err => {
                console.error('Error al reanudar música de fondo:', err);
            });
        }
    });
    
    // Detectar cambios en el estado de pantalla completa
    document.addEventListener('fullscreenchange', () => {
        if (!document.fullscreenElement) {
            gameIframeContainer.classList.remove('fullscreen');
            fullscreenButton.querySelector('span').textContent = currentSettings.language === 'es' ? 'Pantalla Completa' : 'Fullscreen';
            fullscreenButton.querySelector('i').className = 'fas fa-expand';
        }
    });
}

// Inicializar pantalla de título
function initSplashScreen() {
    const splashScreen = document.getElementById('splashScreen');
    const startButton = document.getElementById('startButton');
    const backgroundMusic = document.getElementById('backgroundMusic');
    
    createSpaceBackground('splashStars');
    
    // Iniciar música de fondo
    initBackgroundMusic();
    
    startButton.addEventListener('click', () => {
        splashScreen.style.opacity = '0';
        
        // Detener la música de fondo con fade out
        let volume = backgroundMusic.volume;
        const fadeInterval = setInterval(() => {
            volume = Math.max(0, volume - 0.05);
            backgroundMusic.volume = volume;
            if (volume <= 0) {
                clearInterval(fadeInterval);
                backgroundMusic.pause();
            }
        }, 100);
        
        setTimeout(() => {
            splashScreen.style.display = 'none';
        }, 1000);
    });
    
    // Añadir sonido al botón de inicio
    startButton.addEventListener('mouseenter', playHoverSound);
}

// Navegación entre secciones
function setupNavigation() {
    const sidebarItems = document.querySelectorAll('.sidebar-item[data-section]');
    const contentSections = document.querySelectorAll('.content-section');
    
    sidebarItems.forEach(item => {
        item.addEventListener('click', () => {
            // Actualizar ítem activo en la barra lateral
            document.querySelector('.sidebar-item.active').classList.remove('active');
            item.classList.add('active');
            
            // Mostrar la sección correspondiente
            const sectionId = item.getAttribute('data-section');
            contentSections.forEach(section => {
                section.classList.remove('active');
            });
            document.getElementById(`${sectionId}Section`).classList.add('active');
            
            // Cargar contenido según la sección
            if (sectionId === 'games') {
                loadGames('all');
            } else if (sectionId === 'tutorials') {
                loadTutorials('all');
            }
        });
    });
}

// Filtrar juegos por categoría
function setupCategories() {
    const categories = document.querySelectorAll('.category');
    
    categories.forEach(category => {
        category.addEventListener('click', () => {
            // Obtener el contenedor padre para determinar si estamos en juegos o tutoriales
            const parentSection = category.closest('.content-section');
            const isGamesSection = parentSection.id === 'gamesSection';
            
            // Actualizar categoría activa dentro de la sección actual
            parentSection.querySelector('.category.active').classList.remove('active');
            category.classList.add('active');
            
            // Cargar contenido según la sección
            const categoryName = category.getAttribute('data-category');
            if (isGamesSection) {
                loadGames(categoryName);
            } else {
                loadTutorials(categoryName);
            }
        });
    });
}

// Configurar eventos para las opciones de configuración
function setupSettingsEvents() {
    // Tema
    document.querySelectorAll('input[name="theme"]').forEach(input => {
        input.addEventListener('change', function() {
            currentSettings.theme = this.value;
            applySettings();
        });
    });

    // Tamaño de fuente
    document.querySelectorAll('input[name="fontSize"]').forEach(input => {
        input.addEventListener('change', function() {
            currentSettings.fontSize = this.value;
            applySettings();
        });
    });

    // Color de acento
    document.getElementById('accentColor').addEventListener('change', function() {
        currentSettings.accentColor = this.value;
        applySettings();
    });

    // Animaciones
    document.getElementById('animationsToggle').addEventListener('change', function() {
        currentSettings.animations = this.checked;
        applySettings();
    });

    // Idioma
    document.getElementById('languageSelect').addEventListener('change', function() {
        currentSettings.language = this.value;
        applySettings();
    });

    // Efectos de sonido
    document.getElementById('soundEffectsToggle').addEventListener('change', function() {
        currentSettings.soundEffects = this.checked;
        applySettings();
    });

    // Volumen de efectos
    document.getElementById('soundEffectsVolume').addEventListener('input', function() {
        currentSettings.soundEffectsVolume = parseInt(this.value);
        document.querySelector('#soundEffectsVolume + .range-value').textContent = `${this.value}%`;
        applySettings();
    });

    // Música de fondo
    document.getElementById('backgroundMusicToggle').addEventListener('change', function() {
        currentSettings.backgroundMusic = this.checked;
        const backgroundMusic = document.getElementById('backgroundMusic');
        
        if (this.checked) {
            backgroundMusic.play().catch(err => {
                console.error('Error al reproducir música de fondo:', err);
            });
        } else {
            backgroundMusic.pause();
        }
    });

    // Volumen de música
    document.getElementById('backgroundMusicVolume').addEventListener('input', function() {
        currentSettings.backgroundMusicVolume = parseInt(this.value);
        document.querySelector('#backgroundMusicVolume + .range-value').textContent = `${this.value}%`;
        document.getElementById('backgroundMusic').volume = this.value / 100;
    });

    // Movimiento reducido
    document.getElementById('reducedMotionToggle').addEventListener('change', function() {
        currentSettings.reducedMotion = this.checked;
        applySettings();
    });

    // Alto contraste
    document.getElementById('highContrastToggle').addEventListener('change', function() {
        currentSettings.highContrast = this.checked;
        applySettings();
    });

    // Guardar en cookies
    document.getElementById('saveCookiesToggle').addEventListener('change', function() {
        currentSettings.saveCookies = this.checked;
    });

    // Botón de restablecer
    document.getElementById('resetSettingsButton').addEventListener('click', function() {
        currentSettings = { ...defaultSettings };
        applySettings();
        showAlert('info', 
            currentSettings.language === 'es' ? 'Configuración restablecida a los valores predeterminados' : 'Settings reset to default values', 
            null, 
            currentSettings.language === 'es' ? 'Configuración restablecida' : 'Settings Reset'
        );
    });

    // Botón de guardar
    document.getElementById('saveSettingsButton').addEventListener('click', function() {
        saveSettingsToCookies();
        showAlert('info', 
            currentSettings.language === 'es' ? 'Configuración guardada correctamente' : 'Settings saved successfully', 
            null, 
            currentSettings.language === 'es' ? 'Configuración guardada' : 'Settings Saved'
        );
    });
}

// Configurar eventos para el modal de carpeta
function setupFolderModal() {
    const folderModal = document.getElementById('folderModal');
    const folderClose = document.getElementById('folderClose');
    
    // Cerrar modal al hacer clic en el botón de cerrar
    folderClose.addEventListener('click', () => {
        folderModal.classList.remove('show');
    });
    
    // Cerrar modal al hacer clic fuera del contenido
    folderModal.addEventListener('click', (e) => {
        if (e.target === folderModal) {
            folderModal.classList.remove('show');
        }
    });
    
    // Cerrar modal con la tecla Escape
    document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape' && folderModal.classList.contains('show')) {
            folderModal.classList.remove('show');
        }
    });
}

// Función para seleccionar un juego aleatorio
function getRandomGame() {
    // Filtrar juegos que no estén en carpetas para simplificar
    const standaloneGames = gameData.filter(game => !game.folder);
    
    // Seleccionar un juego aleatorio
    const randomIndex = Math.floor(Math.random() * standaloneGames.length);
    return standaloneGames[randomIndex];
}

// Función para mostrar el juego aleatorio
function showRandomGame() {
    // Efecto visual de carga
    showLoadingCursor();
    
    // Pequeño retraso para efecto visual
    setTimeout(() => {
        // Seleccionar juego aleatorio
        const randomGame = getRandomGame();
        
        // Cargar el juego aleatorio en el iframe
        loadGameInIframe(randomGame.url, randomGame.title);
        
        // Desactivar cursor de carga
        hideLoadingCursor();
    }, 800);
}

// Mostrar alerta
function showAlert(type, message, redirect, title) {
    const alert = document.getElementById('alert');
    const overlay = document.getElementById('overlay');
    const alertTitle = document.getElementById('alertTitle');
    const alertMessage = document.getElementById('alertMessage');
    const alertButton = document.getElementById('alertButton');
    
    // Configurar alerta
    alertTitle.textContent = title || (currentSettings.language === 'es' ? 'Información' : 'Information');
    alertMessage.textContent = message;
    
    // Mostrar alerta
    overlay.classList.add('show');
    setTimeout(() => {
        alert.classList.add('show');
    }, 100);
    
    // Configurar botón
    alertButton.onclick = () => {
        alert.classList.remove('show');
        setTimeout(() => {
            overlay.classList.remove('show');
        }, 300);
        
        if (redirect) {
            loadGameInIframe(redirect, title);
        }
    };
}

// Inicializar todo cuando se carga la página
window.addEventListener('load', () => {
    // Cargar configuración desde cookies
    loadSettingsFromCookies();
    
    // Aplicar configuración
    applySettings();
    
    // Inicializar pantalla de título
    initSplashScreen();
    
    // Crear fondo espacial
    createSpaceBackground('stars');
    
    // Inicializar componentes
    setupNavigation();
    setupCategories();
    setupSettingsEvents();
    setupFolderModal();
    setupIframeControls();
    
    // Configurar el botón de juego aleatorio
    const randomGameButton = document.getElementById('randomGameButton');
    if (randomGameButton) {
        randomGameButton.addEventListener('click', showRandomGame);
        randomGameButton.addEventListener('mouseenter', playHoverSound);
    }
});
</script>
</body>
</html>
